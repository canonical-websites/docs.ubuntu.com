<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>MAAS API &mdash; MAAS dev documentation</title>
    
    <link rel="stylesheet" href="/static/maas-1.9/flasky.css" type="text/css" />
    <link rel="stylesheet" href="/static/maas-1.9/pygments.css" type="text/css" />
    <link rel="stylesheet" href="https://assets.ubuntu.com/sites/guidelines/css/latest/ubuntu-styles.css" type="text/css" />
    <link rel="stylesheet" href="https://assets.ubuntu.com/sites/ubuntu/latest/u/css/global.css" type="text/css" />
    <link rel="stylesheet" href="/static/maas-1.9/css/main.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     'dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="/static/maas-1.9/jquery.js"></script>
    <script type="text/javascript" src="/static/maas-1.9/underscore.js"></script>
    <script type="text/javascript" src="/static/maas-1.9/doctools.js"></script>
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
  <li class="nav-item nav-item-0">
      <a href="index.html">MAAS 2.1 documentation index</a>
  </li>
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="maas-api">
<span id="region-controller-api"></span><h1>MAAS API<a class="headerlink" href="api.html#maas-api" title="Permalink to this headline">¶</a></h1>
<p>Restful MAAS API.</p>
<p>This is the documentation for the API that lets you control and query MAAS.
The API is &#8220;Restful&#8221;, which means that you access it through normal HTTP
requests.</p>
<div class="section" id="api-versions">
<h2>API versions<a class="headerlink" href="api.html#api-versions" title="Permalink to this headline">¶</a></h2>
<p>At any given time, MAAS may support multiple versions of its API.  The version
number is included in the API&#8217;s URL, e.g. /api/2.0/</p>
<p>For now, 2.0 is the only supported version.</p>
<p>The current API version number can be retrieved by issuing a GET to
&#8220;/api/version/&#8221;. Accessing an old or unknown API version URL will result in a
&#8220;410 GONE&#8221; being returned, along with a descriptive error message. Both the
error message and the api version are returned as plaintext.</p>
</div>
<div class="section" id="http-methods-and-parameter-passing">
<h2>HTTP methods and parameter-passing<a class="headerlink" href="api.html#http-methods-and-parameter-passing" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>The following HTTP methods are available for accessing the API:</dt>
<dd><ul class="first last simple">
<li>GET (for information retrieval and queries),</li>
<li>POST (for asking the system to do things),</li>
<li>PUT (for updating objects), and</li>
<li>DELETE (for deleting objects).</li>
</ul>
</dd>
</dl>
<p>All methods except DELETE may take parameters, but they are not all passed in
the same way.  GET parameters are passed in the URL, as is normal with a GET:
&#8220;/item/?foo=bar&#8221; passes parameter &#8220;foo&#8221; with value &#8220;bar&#8221;.</p>
<p>POST and PUT are different.  Your request should have MIME type
&#8220;multipart/form-data&#8221;; each part represents one parameter (for POST) or
attribute (for PUT).  Each part is named after the parameter or attribute it
contains, and its contents are the conveyed value.</p>
<p>All parameters are in text form.  If you need to submit binary data to the
API, don&#8217;t send it as any MIME binary format; instead, send it as a plain text
part containing base64-encoded data.</p>
<p>Most resources offer a choice of GET or POST operations.  In those cases these
methods will take one special parameter, called <cite>op</cite>, to indicate what it is
you want to do.</p>
<p>For example, to list all machines, you might GET &#8220;/api/2.0/machines&#8221;.</p>
</div>
<div class="section" id="operations">
<h2>Operations<a class="headerlink" href="api.html#operations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="logged-in-user">
<h3>Logged-in user<a class="headerlink" href="api.html#logged-in-user" title="Permalink to this headline">¶</a></h3>
<p>Manage the current logged-in user.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/account/</span></code> <code class="docutils literal"><span class="pre">op=list_authorisation_tokens</span></code></dt>
<dd><p class="first">List authorisation tokens available to the currently logged-in user.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">return:</th><td class="field-body">list of dictionaries representing each key&#8217;s name and token.</td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/account/</span></code> <code class="docutils literal"><span class="pre">op=create_authorisation_token</span></code></dt>
<dd><p class="first">Create an authorisation OAuth token and OAuth consumer.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Optional name of the token that will be generated.</td>
</tr>
<tr class="field-even field"><th class="field-name">type name:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">return:</th><td class="field-body">a json dict with four keys: &#8216;token_key&#8217;,
&#8216;token_secret&#8217;, &#8216;consumer_key&#8217;  and &#8216;name&#8217;(e.g.
{token_key: &#8216;s65244576fgqs&#8217;, token_secret: &#8216;qsdfdhv34&#8217;,
consumer_key: &#8216;68543fhj854fg&#8217;, name: &#8216;MAAS consumer&#8217;}).</td>
</tr>
<tr class="field-even field"><th class="field-name">rtype:</th><td class="field-body">string (json)</td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/account/</span></code> <code class="docutils literal"><span class="pre">op=delete_authorisation_token</span></code></dt>
<dd><p class="first">Delete an authorisation OAuth token and the related OAuth consumer.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param token_key:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The key of the token to be deleted.</td>
</tr>
<tr class="field-even field"><th class="field-name">type token_key:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/account/</span></code> <code class="docutils literal"><span class="pre">op=update_token_name</span></code></dt>
<dd><p class="first">Modify the consumer name of an authorisation OAuth token.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param token:</th><td class="field-body">Can be the whole token or only the token key.</td>
</tr>
<tr class="field-even field"><th class="field-name">type token:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">New name of the token.</td>
</tr>
<tr class="field-even field"><th class="field-name">type name:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="bcache-cache-set">
<h3>Bcache Cache Set<a class="headerlink" href="api.html#bcache-cache-set" title="Permalink to this headline">¶</a></h3>
<p>Manage bcache cache set on a machine.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/nodes/{system_id}/bcache-cache-set/{cache_set_id}/</span></code></dt>
<dd><p class="first">Delete cache set on a machine.</p>
<p class="last">Returns 400 if the cache set is in use.
Returns 404 if the machine or cache set is not found.
Returns 409 if the machine is not Ready.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/nodes/{system_id}/bcache-cache-set/{cache_set_id}/</span></code></dt>
<dd><p class="first">Read bcache cache set on a machine.</p>
<p class="last">Returns 404 if the machine or cache set is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/nodes/{system_id}/bcache-cache-set/{cache_set_id}/</span></code></dt>
<dd><p class="first">Delete bcache on a machine.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param cache_device:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Cache block device to replace current one.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param cache_partition:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Cache partition to replace current one.</td>
</tr>
</tbody>
</table>
<p>Specifying both a cache_device and a cache_partition is not allowed.</p>
<p class="last">Returns 404 if the machine or the cache set is not found.
Returns 409 if the machine is not Ready.</p>
</dd>
</dl>
</div>
<div class="section" id="bcache-cache-sets">
<h3>Bcache Cache Sets<a class="headerlink" href="api.html#bcache-cache-sets" title="Permalink to this headline">¶</a></h3>
<p>Manage bcache cache sets on a machine.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/nodes/{system_id}/bcache-cache-sets/</span></code></dt>
<dd><p class="first">List all bcache cache sets belonging to a machine.</p>
<p class="last">Returns 404 if the machine is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/{system_id}/bcache-cache-sets/</span></code></dt>
<dd><p class="first">Creates a Bcache Cache Set.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param cache_device:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Cache block device.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param cache_partition:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Cache partition.</td>
</tr>
</tbody>
</table>
<p>Specifying both a cache_device and a cache_partition is not allowed.</p>
<p class="last">Returns 404 if the machine is not found.
Returns 409 if the machine is not Ready.</p>
</dd>
</dl>
</div>
<div class="section" id="bcache-device">
<h3>Bcache Device<a class="headerlink" href="api.html#bcache-device" title="Permalink to this headline">¶</a></h3>
<p>Manage bcache device on a machine.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/nodes/{system_id}/bcache/{bcache_id}/</span></code></dt>
<dd><p class="first">Delete bcache on a machine.</p>
<p class="last">Returns 404 if the machine or bcache is not found.
Returns 409 if the machine is not Ready.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/nodes/{system_id}/bcache/{bcache_id}/</span></code></dt>
<dd><p class="first">Read bcache device on a machine.</p>
<p class="last">Returns 404 if the machine or bcache is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/nodes/{system_id}/bcache/{bcache_id}/</span></code></dt>
<dd><p class="first">Delete bcache on a machine.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the Bcache.</td>
</tr>
<tr class="field-even field"><th class="field-name">param uuid:</th><td class="field-body">UUID of the Bcache.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param cache_set:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Cache set to replace current one.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param backing_device:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Backing block device to replace current one.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param backing_partition:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Backing partition to replace current one.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param cache_mode:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Cache mode (writeback, writethrough, writearound).</td>
</tr>
</tbody>
</table>
<p>Specifying both a device and a partition for a given role (cache or
backing) is not allowed.</p>
<p class="last">Returns 404 if the machine or the bcache is not found.
Returns 409 if the machine is not Ready.</p>
</dd>
</dl>
</div>
<div class="section" id="bcache-devices">
<h3>Bcache Devices<a class="headerlink" href="api.html#bcache-devices" title="Permalink to this headline">¶</a></h3>
<p>Manage bcache devices on a machine.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/nodes/{system_id}/bcaches/</span></code></dt>
<dd><p class="first">List all bcache devices belonging to a machine.</p>
<p class="last">Returns 404 if the machine is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/{system_id}/bcaches/</span></code></dt>
<dd><p class="first">Creates a Bcache.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the Bcache.</td>
</tr>
<tr class="field-even field"><th class="field-name">param uuid:</th><td class="field-body">UUID of the Bcache.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param cache_set:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Cache set.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param backing_device:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Backing block device.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param backing_partition:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Backing partition.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param cache_mode:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Cache mode (WRITEBACK, WRITETHROUGH, WRITEAROUND).</td>
</tr>
</tbody>
</table>
<p>Specifying both a device and a partition for a given role (cache or
backing) is not allowed.</p>
<p class="last">Returns 404 if the machine is not found.
Returns 409 if the machine is not Ready.</p>
</dd>
</dl>
</div>
<div class="section" id="block-device">
<h3>Block device<a class="headerlink" href="api.html#block-device" title="Permalink to this headline">¶</a></h3>
<p>Manage a block device on a machine.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/nodes/{system_id}/blockdevices/{device_id}/</span></code></dt>
<dd><p class="first">Delete block device on a machine.</p>
<p class="last">Returns 404 if the machine or block device is not found.
Returns 403 if the user is not allowed to delete the block device.
Returns 409 if the machine is not Ready.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/nodes/{system_id}/blockdevices/{device_id}/</span></code></dt>
<dd><p class="first">Read block device on node.</p>
<p class="last">Returns 404 if the machine or block device is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/{system_id}/blockdevices/{device_id}/</span></code> <code class="docutils literal"><span class="pre">op=add_tag</span></code></dt>
<dd><p class="first">Add a tag to block device on a machine.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param tag:</th><td class="field-body">The tag being added.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the machine or block device is not found.
Returns 403 if the user is not allowed to update the block device.
Returns 409 if the machine is not Ready.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/{system_id}/blockdevices/{device_id}/</span></code> <code class="docutils literal"><span class="pre">op=format</span></code></dt>
<dd><p class="first">Format block device with filesystem.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param fstype:</th><td class="field-body">Type of filesystem.</td>
</tr>
<tr class="field-even field"><th class="field-name">param uuid:</th><td class="field-body">UUID of the filesystem.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 403 when the user doesn&#8217;t have the ability to format the             block device.
Returns 404 if the machine or block device is not found.
Returns 409 if the machine is not Ready or Allocated.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/{system_id}/blockdevices/{device_id}/</span></code> <code class="docutils literal"><span class="pre">op=mount</span></code></dt>
<dd><p class="first">Mount the filesystem on block device.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param mount_point:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Path on the filesystem to mount.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param mount_options:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Options to pass to mount(8).</td>
</tr>
</tbody>
</table>
<p class="last">Returns 403 when the user doesn&#8217;t have the ability to mount the             block device.
Returns 404 if the machine or block device is not found.
Returns 409 if the machine is not Ready or Allocated.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/{system_id}/blockdevices/{device_id}/</span></code> <code class="docutils literal"><span class="pre">op=remove_tag</span></code></dt>
<dd><p class="first">Remove a tag from block device on a machine.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param tag:</th><td class="field-body">The tag being removed.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the machine or block device is not found.
Returns 403 if the user is not allowed to update the block device.
Returns 409 if the machine is not Ready.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/{system_id}/blockdevices/{device_id}/</span></code> <code class="docutils literal"><span class="pre">op=set_boot_disk</span></code></dt>
<dd><p class="first">Set this block device as the boot disk for the machine.</p>
<p class="last">Returns 400 if the block device is a virtual block device.
Returns 404 if the machine or block device is not found.
Returns 403 if the user is not allowed to update the block device.
Returns 409 if the machine is not Ready or Allocated.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/{system_id}/blockdevices/{device_id}/</span></code> <code class="docutils literal"><span class="pre">op=unformat</span></code></dt>
<dd><p class="first">Unformat block device with filesystem.</p>
<p class="last">Returns 400 if the block device is not formatted, currently mounted,             or part of a filesystem group.
Returns 403 when the user doesn&#8217;t have the ability to unformat the             block device.
Returns 404 if the machine or block device is not found.
Returns 409 if the machine is not Ready or Allocated.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/{system_id}/blockdevices/{device_id}/</span></code> <code class="docutils literal"><span class="pre">op=unmount</span></code></dt>
<dd><p class="first">Unmount the filesystem on block device.</p>
<p class="last">Returns 400 if the block device is not formatted or not currently             mounted.
Returns 403 when the user doesn&#8217;t have the ability to unmount the             block device.
Returns 404 if the machine or block device is not found.
Returns 409 if the machine is not Ready or Allocated.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/nodes/{system_id}/blockdevices/{device_id}/</span></code></dt>
<dd><p class="first">Update block device on a machine.</p>
<p>Fields for physical block device:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the block device.</td>
</tr>
<tr class="field-even field"><th class="field-name">param model:</th><td class="field-body">Model of the block device.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param serial:</th><td class="field-body">Serial number of the block device.</td>
</tr>
<tr class="field-even field"><th class="field-name">param id_path:</th><td class="field-body">(optional) Only used if model and serial cannot be             provided. This should be a path that is fixed and doesn&#8217;t change             depending on the boot order or kernel version.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param size:</th><td class="field-body">Size of the block device.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param block_size:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Block size of the block device.</td>
</tr>
</tbody>
</table>
<p>Fields for virtual block device:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the block device.</td>
</tr>
<tr class="field-even field"><th class="field-name">param uuid:</th><td class="field-body">UUID of the block device.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param size:</th><td class="field-body">Size of the block device. (Only allowed for logical             volumes.)</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the machine or block device is not found.
Returns 403 if the user is not allowed to update the block device.
Returns 409 if the machine is not Ready.</p>
</dd>
</dl>
</div>
<div class="section" id="block-devices">
<h3>Block devices<a class="headerlink" href="api.html#block-devices" title="Permalink to this headline">¶</a></h3>
<p>Manage block devices on a machine.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/nodes/{system_id}/blockdevices/</span></code></dt>
<dd><p class="first">List all block devices belonging to a machine.</p>
<p class="last">Returns 404 if the machine is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/{system_id}/blockdevices/</span></code></dt>
<dd><p class="first">Create a physical block device.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the block device.</td>
</tr>
<tr class="field-even field"><th class="field-name">param model:</th><td class="field-body">Model of the block device.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param serial:</th><td class="field-body">Serial number of the block device.</td>
</tr>
<tr class="field-even field"><th class="field-name">param id_path:</th><td class="field-body">(optional) Only used if model and serial cannot be
provided. This should be a path that is fixed and doesn&#8217;t change
depending on the boot order or kernel version.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param size:</th><td class="field-body">Size of the block device.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param block_size:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Block size of the block device.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the node is not found.</p>
</dd>
</dl>
</div>
<div class="section" id="boot-resource">
<h3>Boot resource<a class="headerlink" href="api.html#boot-resource" title="Permalink to this headline">¶</a></h3>
<p>Manage a boot resource.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/boot-resources/{id}/</span></code></dt>
<dd>Delete boot resource.</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/boot-resources/{id}/</span></code></dt>
<dd>Read a boot resource.</dd>
</dl>
</div>
<div class="section" id="boot-resources">
<h3>Boot resources<a class="headerlink" href="api.html#boot-resources" title="Permalink to this headline">¶</a></h3>
<p>Manage the boot resources.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/boot-resources/</span></code></dt>
<dd><p class="first">List all boot resources.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param type:</th><td class="field-body">Type of boot resources to list. Default: all</td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/boot-resources/</span></code></dt>
<dd><p class="first">Uploads a new boot resource.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the boot resource.</td>
</tr>
<tr class="field-even field"><th class="field-name">param title:</th><td class="field-body">Title for the boot resource.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param architecture:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Architecture the boot resource supports.</td>
</tr>
<tr class="field-even field"><th class="field-name">param filetype:</th><td class="field-body">Filetype for uploaded content. (Default: tgz)</td>
</tr>
<tr class="field-odd field"><th class="field-name">param content:</th><td class="field-body">Image content. Note: this is not a normal parameter,
but a file upload.</td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/boot-resources/</span></code> <code class="docutils literal"><span class="pre">op=import</span></code></dt>
<dd>Import the boot resources.</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/boot-resources/</span></code> <code class="docutils literal"><span class="pre">op=stop_import</span></code></dt>
<dd>Stop import of boot resources.</dd>
</dl>
</div>
<div class="section" id="boot-source">
<h3>Boot source<a class="headerlink" href="api.html#boot-source" title="Permalink to this headline">¶</a></h3>
<p>Manage a boot source.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/boot-sources/{id}/</span></code></dt>
<dd>Delete a specific boot source.</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/boot-sources/{id}/</span></code></dt>
<dd>Read a boot source.</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/boot-sources/{id}/</span></code></dt>
<dd><p class="first">Update a specific boot source.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param url:</th><td class="field-body">The URL of the BootSource.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param keyring_filename:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">The path to the keyring file for this
BootSource.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param keyring_data:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The GPG keyring for this BootSource,
base64-encoded data.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="boot-source-selection">
<h3>Boot source selection<a class="headerlink" href="api.html#boot-source-selection" title="Permalink to this headline">¶</a></h3>
<p>Manage a boot source selection.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/boot-sources/{boot_source_id}/selections/{id}/</span></code></dt>
<dd>Delete a specific boot source.</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/boot-sources/{boot_source_id}/selections/{id}/</span></code></dt>
<dd>Read a boot source selection.</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/boot-sources/{boot_source_id}/selections/{id}/</span></code></dt>
<dd><p class="first">Update a specific boot source selection.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param release:</th><td class="field-body">The release for which to import resources.</td>
</tr>
<tr class="field-even field"><th class="field-name">param arches:</th><td class="field-body">The list of architectures for which to import resources.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param subarches:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The list of subarchitectures for which to import
resources.</td>
</tr>
<tr class="field-even field"><th class="field-name">param labels:</th><td class="field-body">The list of labels for which to import resources.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="boot-source-selections">
<h3>Boot source selections<a class="headerlink" href="api.html#boot-source-selections" title="Permalink to this headline">¶</a></h3>
<p>Manage the collection of boot source selections.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/boot-sources/{boot_source_id}/selections/</span></code></dt>
<dd><p class="first">List boot source selections.</p>
<p class="last">Get a listing of a boot source&#8217;s selections.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/boot-sources/{boot_source_id}/selections/</span></code></dt>
<dd><p class="first">Create a new boot source selection.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param release:</th><td class="field-body">The release for which to import resources.</td>
</tr>
<tr class="field-even field"><th class="field-name">param arches:</th><td class="field-body">The architecture list for which to import resources.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param subarches:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The subarchitecture list for which to import
resources.</td>
</tr>
<tr class="field-even field"><th class="field-name">param labels:</th><td class="field-body">The label lists for which to import resources.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="boot-sources">
<h3>Boot sources<a class="headerlink" href="api.html#boot-sources" title="Permalink to this headline">¶</a></h3>
<p>Manage the collection of boot sources.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/boot-sources/</span></code></dt>
<dd><p class="first">List boot sources.</p>
<p class="last">Get a listing of boot sources.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/boot-sources/</span></code></dt>
<dd><p class="first">Create a new boot source.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param url:</th><td class="field-body">The URL of the BootSource.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param keyring_filename:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">The path to the keyring file for
this BootSource.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param keyring_data:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The GPG keyring for this BootSource,
base64-encoded.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="commissioning-script">
<h3>Commissioning script<a class="headerlink" href="api.html#commissioning-script" title="Permalink to this headline">¶</a></h3>
<p>Manage a custom commissioning script.</p>
<blockquote>
<div>This functionality is only available to administrators.</div></blockquote>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/commissioning-scripts/{name}</span></code></dt>
<dd>Delete a commissioning script.</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/commissioning-scripts/{name}</span></code></dt>
<dd>Read a commissioning script.</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/commissioning-scripts/{name}</span></code></dt>
<dd>Update a commissioning script.</dd>
</dl>
</div>
<div class="section" id="commissioning-scripts">
<h3>Commissioning scripts<a class="headerlink" href="api.html#commissioning-scripts" title="Permalink to this headline">¶</a></h3>
<p>Manage custom commissioning scripts.</p>
<blockquote>
<div>This functionality is only available to administrators.</div></blockquote>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/commissioning-scripts/</span></code></dt>
<dd>List commissioning scripts.</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/commissioning-scripts/</span></code></dt>
<dd><p class="first">Create a new commissioning script.</p>
<p>Each commissioning script is identified by a unique name.</p>
<p>By convention the name should consist of a two-digit number, a dash,
and a brief descriptive identifier consisting only of ASCII
characters.  You don&#8217;t need to follow this convention, but not doing
so opens you up to risks w.r.t. encoding and ordering.  The name must
not contain any whitespace, quotes, or apostrophes.</p>
<p>A commissioning machine will run each of the scripts in lexicographical
order.  There are no promises about how non-ASCII characters are
sorted, or even how upper-case letters are sorted relative to
lower-case letters.  So where ordering matters, use unique numbers.</p>
<p>Scripts built into MAAS will have names starting with &#8220;00-maas&#8221; or
&#8220;99-maas&#8221; to ensure that they run first or last, respectively.</p>
<p>Usually a commissioning script will be just that, a script.  Ideally a
script should be ASCII text to avoid any confusion over encoding.  But
in some cases a commissioning script might consist of a binary tool
provided by a hardware vendor.  Either way, the script gets passed to
the commissioning machine in the exact form in which it was uploaded.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Unique identifying name for the script.  Names should
follow the pattern of &#8220;25-burn-in-hard-disk&#8221; (all ASCII, and with
numbers greater than zero, and generally no &#8220;weird&#8221; characters).</td>
</tr>
<tr class="field-even field"><th class="field-name">param content:</th><td class="field-body">A script file, to be uploaded in binary form.  Note:
this is not a normal parameter, but a file upload.  Its filename
is ignored; MAAS will know it by the name you pass to the request.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="dhcp-snippet">
<h3>DHCP Snippet<a class="headerlink" href="api.html#dhcp-snippet" title="Permalink to this headline">¶</a></h3>
<p>Manage an individual DHCP snippet.</p>
<blockquote>
<div>The DHCP snippet is identified by its id.</div></blockquote>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/dhcp-snippets/{dhcp_snippet_id}/</span></code></dt>
<dd><p class="first">Delete a DHCP snippet.</p>
<p class="last">Returns 404 if the DHCP snippet is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/dhcp-snippets/{dhcp_snippet_id}/</span></code></dt>
<dd><p class="first">Read DHCP snippet.</p>
<p class="last">Returns 404 if the snippet is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/dhcp-snippets/{dhcp_snippet_id}/</span></code> <code class="docutils literal"><span class="pre">op=revert</span></code></dt>
<dd><p class="first">Revert the value of a DHCP snippet to an earlier revision.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param to:</th><td class="field-body">What revision in the DHCP snippet&#8217;s history to revert to.
This can either be an ID or a negative number representing how far
back to go.</td>
</tr>
<tr class="field-even field"><th class="field-name">type to:</th><td class="field-body">integer</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the DHCP snippet is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/dhcp-snippets/{dhcp_snippet_id}/</span></code></dt>
<dd><p class="first">Update a DHCP snippet.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">The name of the DHCP snippet.</td>
</tr>
<tr class="field-even field"><th class="field-name">type name:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param value:</th><td class="field-body">The new value of the DHCP snippet to be used in
dhcpd.conf. Previous values are stored and can be reverted.</td>
</tr>
<tr class="field-even field"><th class="field-name">type value:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param description:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">A description of what the DHCP snippet does.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type description:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param enabled:</th><td class="field-body">Whether or not the DHCP snippet is currently enabled.</td>
</tr>
<tr class="field-even field"><th class="field-name">type enabled:</th><td class="field-body">boolean</td>
</tr>
<tr class="field-odd field"><th class="field-name">param node:</th><td class="field-body">The node the DHCP snippet is to be used for. Can not be
set if subnet is set.</td>
</tr>
<tr class="field-even field"><th class="field-name">type node:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param subnet:</th><td class="field-body">The subnet the DHCP snippet is to be used for. Can not
be set if node is set.</td>
</tr>
<tr class="field-even field"><th class="field-name">type subnet:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param global_snippet:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Set the DHCP snippet to be a global option. This
removes any node or subnet links.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type global_snippet:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">boolean</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the DHCP snippet is not found.</p>
</dd>
</dl>
</div>
<div class="section" id="dhcp-snippets">
<h3>DHCP Snippets<a class="headerlink" href="api.html#dhcp-snippets" title="Permalink to this headline">¶</a></h3>
<p>Manage the collection of all DHCP snippets in MAAS.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/dhcp-snippets/</span></code></dt>
<dd>List all DHCP snippets.</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/dhcp-snippets/</span></code></dt>
<dd><p class="first">Create a DHCP snippet.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">The name of the DHCP snippet. This is required to create
a new DHCP snippet.</td>
</tr>
<tr class="field-even field"><th class="field-name">type name:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param value:</th><td class="field-body">The snippet of config inserted into dhcpd.conf. This is
required to create a new DHCP snippet.</td>
</tr>
<tr class="field-even field"><th class="field-name">type value:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param description:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">A description of what the snippet does.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type description:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param enabled:</th><td class="field-body">Whether or not the snippet is currently enabled.</td>
</tr>
<tr class="field-even field"><th class="field-name">type enabled:</th><td class="field-body">boolean</td>
</tr>
<tr class="field-odd field"><th class="field-name">param node:</th><td class="field-body">The node this snippet applies to. Cannot be used with
subnet or global_snippet.</td>
</tr>
<tr class="field-even field"><th class="field-name">type node:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param subnet:</th><td class="field-body">The subnet this snippet applies to. Cannot be used with
node or global_snippet.</td>
</tr>
<tr class="field-even field"><th class="field-name">type subnet:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param global_snippet:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Whether or not this snippet is to be applied
globally. Cannot be used with node or subnet.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type global_snippet:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">boolean</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the DHCP snippet is not found.</p>
</dd>
</dl>
</div>
<div class="section" id="dnsresource">
<h3>DNSResource<a class="headerlink" href="api.html#dnsresource" title="Permalink to this headline">¶</a></h3>
<p>Manage dnsresource.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/dnsresources/{dnsresource_id}/</span></code></dt>
<dd><p class="first">Delete dnsresource.</p>
<p class="last">Returns 403 if the user does not have permission to delete the
dnsresource.
Returns 404 if the dnsresource is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/dnsresources/{dnsresource_id}/</span></code></dt>
<dd><p class="first">Read dnsresource.</p>
<p class="last">Returns 404 if the dnsresource is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/dnsresources/{dnsresource_id}/</span></code></dt>
<dd><p class="first">Update dnsresource.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param fqdn:</th><td class="field-body">Hostname (with domain) for the dnsresource.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param ip_address:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Address to assign to the dnsresource.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 403 if the user does not have permission to update the
dnsresource.
Returns 404 if the dnsresource is not found.</p>
</dd>
</dl>
</div>
<div class="section" id="dnsresourcerecord">
<h3>DNSResourceRecord<a class="headerlink" href="api.html#dnsresourcerecord" title="Permalink to this headline">¶</a></h3>
<p>Manage dnsresourcerecord.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/dnsresourcerecords/{dnsresourcerecord_id}/</span></code></dt>
<dd><p class="first">Delete dnsresourcerecord.</p>
<p class="last">Returns 403 if the user does not have permission to delete the
dnsresourcerecord.
Returns 404 if the dnsresourcerecord is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/dnsresourcerecords/{dnsresourcerecord_id}/</span></code></dt>
<dd><p class="first">Read dnsresourcerecord.</p>
<p class="last">Returns 404 if the dnsresourcerecord is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/dnsresourcerecords/{dnsresourcerecord_id}/</span></code></dt>
<dd><p class="first">Update dnsresourcerecord.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param rrtype:</th><td class="field-body">Resource Type</td>
</tr>
<tr class="field-even field"><th class="field-name">param rrdata:</th><td class="field-body">Resource Data (everything to the right of Type.)</td>
</tr>
</tbody>
</table>
<p class="last">Returns 403 if the user does not have permission to update the
dnsresourcerecord.
Returns 404 if the dnsresourcerecord is not found.</p>
</dd>
</dl>
</div>
<div class="section" id="dnsresourcerecords">
<h3>DNSResourceRecords<a class="headerlink" href="api.html#dnsresourcerecords" title="Permalink to this headline">¶</a></h3>
<p>Manage dnsresourcerecords.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/dnsresourcerecords/</span></code></dt>
<dd><p class="first">List all dnsresourcerecords.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param domain:</th><td class="field-body">restrict the listing to entries for the domain.</td>
</tr>
<tr class="field-even field"><th class="field-name">param name:</th><td class="field-body">restrict the listing to entries of the given name.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param rrtype:</th><td class="field-body">restrict the listing to entries which have
records of the given rrtype.</td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/dnsresourcerecords/</span></code></dt>
<dd><p class="first">Create a dnsresourcerecord.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param fqdn:</th><td class="field-body">Hostname (with domain) for the dnsresource.  Either fqdn
or (name, domain) must be specified.  Fqdn is ignored if either
name or domain is given.</td>
</tr>
<tr class="field-even field"><th class="field-name">param name:</th><td class="field-body">Hostname (without domain)</td>
</tr>
<tr class="field-odd field"><th class="field-name">param domain:</th><td class="field-body">Domain (name or id)</td>
</tr>
<tr class="field-even field"><th class="field-name">param rrtype:</th><td class="field-body">resource type to create</td>
</tr>
<tr class="field-odd field"><th class="field-name">param rrdata:</th><td class="field-body">resource data (everything to the right of
resource type.)</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="dnsresources">
<h3>DNSResources<a class="headerlink" href="api.html#dnsresources" title="Permalink to this headline">¶</a></h3>
<p>Manage dnsresources.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/dnsresources/</span></code></dt>
<dd><p class="first">List all resources for the specified criteria.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param domain:</th><td class="field-body">restrict the listing to entries for the domain.</td>
</tr>
<tr class="field-even field"><th class="field-name">param name:</th><td class="field-body">restrict the listing to entries of the given name.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param rrtype:</th><td class="field-body">restrict the listing to entries which have
records of the given rrtype.</td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/dnsresources/</span></code></dt>
<dd><p class="first">Create a dnsresource.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param fqdn:</th><td class="field-body">Hostname (with domain) for the dnsresource.  Either fqdn
or (name, domain) must be specified.  Fqdn is ignored if either
name or domain is given.</td>
</tr>
<tr class="field-even field"><th class="field-name">param name:</th><td class="field-body">Hostname (without domain)</td>
</tr>
<tr class="field-odd field"><th class="field-name">param domain:</th><td class="field-body">Domain (name or id)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param address_ttl:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Default ttl for entries in this zone.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param ip_addresses:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">(optional) Address (ip or id) to assign to the
dnsresource.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="device">
<h3>Device<a class="headerlink" href="api.html#device" title="Permalink to this headline">¶</a></h3>
<p>Manage an individual device.</p>
<blockquote>
<div>The device is identified by its system_id.</div></blockquote>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/devices/{system_id}/</span></code></dt>
<dd><p class="first">Delete a specific Device.</p>
<p class="last">Returns 404 if the device is not found.
Returns 403 if the user does not have permission to delete the device.
Returns 204 if the device is successfully deleted.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/devices/{system_id}/</span></code></dt>
<dd><p class="first">Read a specific Node.</p>
<p class="last">Returns 404 if the node is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/devices/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=details</span></code></dt>
<dd><p class="first">Obtain various system details.</p>
<p>For example, LLDP and <code class="docutils literal"><span class="pre">lshw</span></code> XML dumps.</p>
<p>Returns a <code class="docutils literal"><span class="pre">{detail_type:</span> <span class="pre">xml,</span> <span class="pre">...}</span></code> map, where
<code class="docutils literal"><span class="pre">detail_type</span></code> is something like &#8220;lldp&#8221; or &#8220;lshw&#8221;.</p>
<p>Note that this is returned as BSON and not JSON. This is for
efficiency, but mainly because JSON can&#8217;t do binary content
without applying additional encoding like base-64.</p>
<p class="last">Returns 404 if the node is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/devices/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=power_parameters</span></code></dt>
<dd><p class="first">Obtain power parameters.</p>
<p>This method is reserved for admin users and returns a 403 if the
user is not one.</p>
<p>This returns the power parameters, if any, configured for a
node. For some types of power control this will include private
information such as passwords and secret keys.</p>
<p class="last">Returns 404 if the node is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/devices/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=restore_default_configuration</span></code></dt>
<dd><p class="first">Reset a device&#8217;s configuration to its initial state.</p>
<p class="last">Returns 404 if the device is not found.
Returns 403 if the user does not have permission to reset the device.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/devices/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=restore_networking_configuration</span></code></dt>
<dd><p class="first">Reset a device&#8217;s network options.</p>
<p class="last">Returns 404 if the device is not found
Returns 403 if the user does not have permission to reset the device.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/devices/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=set_owner_data</span></code></dt>
<dd><p class="first">Set key/value data for the current owner.</p>
<p>Pass any key/value data to this method to add, modify, or remove. A key
is removed when the value for that key is set to an empty string.</p>
<p>This operation will not remove any previous keys unless explicitly
passed with an empty string. All owner data is removed when the machine
is no longer allocated to a user.</p>
<p class="last">Returns 404 if the machine is not found.
Returns 403 if the user does not have permission.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/devices/{system_id}/</span></code></dt>
<dd><p class="first">Update a specific device.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param hostname:</th><td class="field-body">The new hostname for this device.</td>
</tr>
<tr class="field-even field"><th class="field-name">type hostname:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param domain:</th><td class="field-body">The domain for this device.</td>
</tr>
<tr class="field-even field"><th class="field-name">type domain:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param parent:</th><td class="field-body">Optional system_id to indicate this device&#8217;s parent.
If the parent is already set and this parameter is omitted,
the parent will be unchanged.</td>
</tr>
<tr class="field-even field"><th class="field-name">type parent:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param zone:</th><td class="field-body">Name of a valid physical zone in which to place this
node.</td>
</tr>
<tr class="field-even field"><th class="field-name">type zone:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the device is not found.
Returns 403 if the user does not have permission to update the device.</p>
</dd>
</dl>
</div>
<div class="section" id="devices">
<h3>Devices<a class="headerlink" href="api.html#devices" title="Permalink to this headline">¶</a></h3>
<p>Manage the collection of all the devices in the MAAS.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/devices/</span></code></dt>
<dd><p class="first">List Nodes visible to the user, optionally filtered by criteria.</p>
<p>Nodes are sorted by id (i.e. most recent last) and grouped by type.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param hostname:</th><td class="field-body">An optional hostname. Only nodes relating to the node
with the matching hostname will be returned. This can be specified
multiple times to see multiple nodes.</td>
</tr>
<tr class="field-even field"><th class="field-name">type hostname:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param mac_address:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">An optional MAC address. Only nodes relating to the
node owning the specified MAC address will be returned. This can be
specified multiple times to see multiple nodes.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type mac_address:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param id:</th><td class="field-body">An optional list of system ids.  Only nodes relating to the
nodes with matching system ids will be returned.</td>
</tr>
<tr class="field-even field"><th class="field-name">type id:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param domain:</th><td class="field-body">An optional name for a dns domain. Only nodes relating
to the nodes in the domain will be returned.</td>
</tr>
<tr class="field-even field"><th class="field-name">type domain:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param zone:</th><td class="field-body">An optional name for a physical zone. Only nodes relating
to the nodes in the zone will be returned.</td>
</tr>
<tr class="field-even field"><th class="field-name">type zone:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param agent_name:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">An optional agent name.  Only nodes relating to the
nodes with matching agent names will be returned.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type agent_name:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/devices/</span></code></dt>
<dd><p class="first">Create a new device.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param hostname:</th><td class="field-body">A hostname. If not given, one will be generated.</td>
</tr>
<tr class="field-even field"><th class="field-name">type hostname:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param domain:</th><td class="field-body">The domain of the device. If not given the default
domain is used.</td>
</tr>
<tr class="field-even field"><th class="field-name">type domain:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param mac_addresses:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">One or more MAC addresses for the device.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type mac_addresses:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param parent:</th><td class="field-body">The system id of the parent.  Optional.</td>
</tr>
<tr class="field-even field"><th class="field-name">type parent:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/devices/</span></code> <code class="docutils literal"><span class="pre">op=set_zone</span></code></dt>
<dd><p class="first">Assign multiple nodes to a physical zone at once.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param zone:</th><td class="field-body">Zone name.  If omitted, the zone is &#8220;none&#8221; and the nodes
will be taken out of their physical zones.</td>
</tr>
<tr class="field-even field"><th class="field-name">param nodes:</th><td class="field-body">system_ids of the nodes whose zones are to be set.
(An empty list is acceptable).</td>
</tr>
</tbody>
</table>
<p class="last">Raises 403 if the user is not an admin.</p>
</dd>
</dl>
</div>
<div class="section" id="discoveries">
<h3>Discoveries<a class="headerlink" href="api.html#discoveries" title="Permalink to this headline">¶</a></h3>
<p>Query observed discoveries.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/discovery/</span></code></dt>
<dd><p class="first">Lists all the devices MAAS has discovered.</p>
<p class="last">Discoveries are listed in the order they were last observed on the
network (most recent first).</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/discovery/</span></code> <code class="docutils literal"><span class="pre">op=by_unknown_ip</span></code></dt>
<dd><p class="first">Lists all discovered devices which have an unknown IP address.</p>
<p>Filters the list of discovered devices by excluding any discoveries
where a known MAAS node is configured with the IP address of the
discovery, or has been observed using it after it was assigned by
a MAAS-managed DHCP server.</p>
<p class="last">Discoveries are listed in the order they were last observed on the
network (most recent first).</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/discovery/</span></code> <code class="docutils literal"><span class="pre">op=by_unknown_ip_and_mac</span></code></dt>
<dd><p class="first">Lists all discovered devices which are completely unknown to MAAS.</p>
<p>Filters the list of discovered devices by excluding any discoveries
where a known MAAS node is configured with either the MAC address or
the IP address of the discovery.</p>
<p class="last">Discoveries are listed in the order they were last observed on the
network (most recent first).</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/discovery/</span></code> <code class="docutils literal"><span class="pre">op=by_unknown_mac</span></code></dt>
<dd><p class="first">Lists all discovered devices which have an unknown IP address.</p>
<p>Filters the list of discovered devices by excluding any discoveries
where an interface known to MAAS is configured with MAC address of the
discovery.</p>
<p class="last">Discoveries are listed in the order they were last observed on the
network (most recent first).</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/discovery/</span></code> <code class="docutils literal"><span class="pre">op=clear</span></code></dt>
<dd><p class="first">Deletes all discovered neighbours and/or mDNS entries.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param mdns:</th><td class="field-body">if True, deletes all mDNS entries.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param neighbours:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">if True, deletes all neighbour entries.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param all:</th><td class="field-body">if True, deletes all discovery data.</td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/discovery/</span></code> <code class="docutils literal"><span class="pre">op=scan</span></code></dt>
<dd><p class="first">Immediately run a neighbour discovery scan on all rack networks.</p>
<p>This command causes each connected rack controller to execute the
&#8216;maas-rack scan-network&#8217; command, which will scan all CIDRs configured
on the rack controller using &#8216;nmap&#8217; (if it is installed) or &#8216;ping&#8217;.</p>
<p>Network discovery must not be set to &#8216;disabled&#8217; for this command to be
useful.</p>
<p>Scanning will be started in the background, and could take a long time
on rack controllers that do not have &#8216;nmap&#8217; installed and are connected
to large networks.</p>
<p>If the call is a success, this method will return a dictionary of
results as follows:</p>
<p>result: A human-readable string summarizing the results.
scan_attempted_on: A list of rack &#8216;system_id&#8217; values where a scan
was attempted. (That is, an RPC connection was successful and a
subsequent call was intended.)</p>
<p>failed_to_connect_to: A list of rack &#8216;system_id&#8217; values where the RPC
connection failed.</p>
<p>scan_started_on: A list of rack &#8216;system_id&#8217; values where a scan was
successfully started.</p>
<p>scan_failed_on: A list of rack &#8216;system_id&#8217; values where
a scan was attempted, but failed because a scan was already in
progress.</p>
<p>rpc_call_timed_out_on: A list of rack &#8216;system_id&#8217; values where the
RPC connection was made, but the call timed out before a ten second
timeout elapsed.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param cidr:</th><td class="field-body">The subnet CIDR(s) to scan (can be specified multiple
times). If not specified, defaults to all networks.</td>
</tr>
<tr class="field-even field"><th class="field-name">param force:</th><td class="field-body">If True, will force the scan, even if all networks are
specified. (This may not be the best idea, depending on acceptable
use agreements, and the politics of the organization that owns the
network.) Default: False.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param always_use_ping:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">If True, will force the scan to use &#8216;ping&#8217; even
if &#8216;nmap&#8217; is installed. Default: False.</td>
</tr>
<tr class="field-even field"><th class="field-name">param slow:</th><td class="field-body">If True, and &#8216;nmap&#8217; is being used, will limit the scan
to nine packets per second. If the scanner is &#8216;ping&#8217;, this option
has no effect. Default: False.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param threads:</th><td class="field-body">The number of threads to use during scanning. If &#8216;nmap&#8217;
is the scanner, the default is one thread per &#8216;nmap&#8217; process. If
&#8216;ping&#8217; is the scanner, the default is four threads per CPU.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="discovery">
<h3>Discovery<a class="headerlink" href="api.html#discovery" title="Permalink to this headline">¶</a></h3>
<p>Read or delete an observed discovery.</p>
<p><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/discovery/{discovery_id}/</span></code>
Domain
======
Manage domain.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/domains/{domain_id}/</span></code></dt>
<dd><p class="first">Delete domain.</p>
<p class="last">Returns 403 if the user does not have permission to update the
dnsresource.
Returns 404 if the domain is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/domains/{domain_id}/</span></code></dt>
<dd><p class="first">Read domain.</p>
<p class="last">Returns 404 if the domain is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/domains/{domain_id}/</span></code></dt>
<dd><p class="first">Update domain.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the domain.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param authoritative:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">True if we are authoritative for this domain.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param ttl:</th><td class="field-body">The default TTL for this domain.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 403 if the user does not have permission to update the
dnsresource.
Returns 404 if the domain is not found.</p>
</dd>
</dl>
</div>
<div class="section" id="domains">
<h3>Domains<a class="headerlink" href="api.html#domains" title="Permalink to this headline">¶</a></h3>
<p>Manage domains.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/domains/</span></code></dt>
<dd>List all domains.</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/domains/</span></code></dt>
<dd><p class="first">Create a domain.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the domain.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param authoritative:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Class type of the domain.</td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/domains/</span></code> <code class="docutils literal"><span class="pre">op=set_serial</span></code></dt>
<dd><p class="first">Set the SOA serial number (for all DNS zones.)</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param serial:</th><td class="field-body">serial number to use next.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="events">
<h3>Events<a class="headerlink" href="api.html#events" title="Permalink to this headline">¶</a></h3>
<p>Retrieve filtered node events.</p>
<blockquote>
<div>A specific Node&#8217;s events is identified by specifying one or more
ids, hostnames, or mac addresses as a list.</div></blockquote>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/events/</span></code> <code class="docutils literal"><span class="pre">op=query</span></code></dt>
<dd><p class="first">List Node events, optionally filtered by various criteria via
URL query parameters.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param hostname:</th><td class="field-body">An optional hostname. Only events relating to the node
with the matching hostname will be returned. This can be specified
multiple times to get events relating to more than one node.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param mac_address:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">An optional list of MAC addresses.  Only
nodes with matching MAC addresses will be returned.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param id:</th><td class="field-body">An optional list of system ids.  Only nodes with
matching system ids will be returned.</td>
</tr>
<tr class="field-even field"><th class="field-name">param zone:</th><td class="field-body">An optional name for a physical zone. Only nodes in the
zone will be returned.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param agent_name:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">An optional agent name.  Only nodes with
matching agent names will be returned.</td>
</tr>
<tr class="field-even field"><th class="field-name">param level:</th><td class="field-body">Desired minimum log level of returned events. Returns
this level of events and greater. Choose from: CRITICAL, DEBUG, ERROR, INFO, WARNING.
The default is INFO.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param limit:</th><td class="field-body">Optional number of events to return. Default 100.
Maximum: 1000.</td>
</tr>
<tr class="field-even field"><th class="field-name">param before:</th><td class="field-body">Optional event id.  Defines where to start returning
older events.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param after:</th><td class="field-body">Optional event id.  Defines where to start returning
newer events.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="fabric">
<h3>Fabric<a class="headerlink" href="api.html#fabric" title="Permalink to this headline">¶</a></h3>
<p>Manage fabric.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/fabrics/{fabric_id}/</span></code></dt>
<dd><p class="first">Delete fabric.</p>
<p class="last">Returns 404 if the fabric is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/fabrics/{fabric_id}/</span></code></dt>
<dd><p class="first">Read fabric.</p>
<p class="last">Returns 404 if the fabric is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/fabrics/{fabric_id}/</span></code></dt>
<dd><p class="first">Update fabric.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the fabric.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param description:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Description of the fabric.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param class_type:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Class type of the fabric.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the fabric is not found.</p>
</dd>
</dl>
</div>
<div class="section" id="fabrics">
<h3>Fabrics<a class="headerlink" href="api.html#fabrics" title="Permalink to this headline">¶</a></h3>
<p>Manage fabrics.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/fabrics/</span></code></dt>
<dd>List all fabrics.</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/fabrics/</span></code></dt>
<dd><p class="first">Create a fabric.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the fabric.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param description:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Description of the fabric.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param class_type:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Class type of the fabric.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="fan-network">
<h3>Fan Network<a class="headerlink" href="api.html#fan-network" title="Permalink to this headline">¶</a></h3>
<p>Manage Fan Network.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/fannetworks/{fannetwork_id}/</span></code></dt>
<dd><p class="first">Delete fannetwork.</p>
<p class="last">Returns 404 if the fannetwork is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/fannetworks/{fannetwork_id}/</span></code></dt>
<dd><p class="first">Read fannetwork.</p>
<p class="last">Returns 404 if the fannetwork is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/fannetworks/{fannetwork_id}/</span></code></dt>
<dd><p class="first">Update fannetwork.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the fannetwork.</td>
</tr>
<tr class="field-even field"><th class="field-name">param overlay:</th><td class="field-body">Overlay network</td>
</tr>
<tr class="field-odd field"><th class="field-name">param underlay:</th><td class="field-body">Underlay network</td>
</tr>
<tr class="field-even field"><th class="field-name">param dhcp:</th><td class="field-body">confiugre dhcp server for overlay net</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param host_reserve:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">number of IP addresses to reserve for host</td>
</tr>
<tr class="field-even field"><th class="field-name">param bridge:</th><td class="field-body">override bridge name</td>
</tr>
<tr class="field-odd field"><th class="field-name">param off:</th><td class="field-body">put this int he config, but disable it.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the fannetwork is not found.</p>
</dd>
</dl>
</div>
<div class="section" id="fan-networks">
<h3>Fan Networks<a class="headerlink" href="api.html#fan-networks" title="Permalink to this headline">¶</a></h3>
<p>Manage Fan Networks.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/fannetworks/</span></code></dt>
<dd>List all fannetworks.</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/fannetworks/</span></code></dt>
<dd><p class="first">Create a fannetwork.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the fannetwork.</td>
</tr>
<tr class="field-even field"><th class="field-name">param overlay:</th><td class="field-body">Overlay network</td>
</tr>
<tr class="field-odd field"><th class="field-name">param underlay:</th><td class="field-body">Underlay network</td>
</tr>
<tr class="field-even field"><th class="field-name">param dhcp:</th><td class="field-body">confiugre dhcp server for overlay net</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param host_reserve:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">number of IP addresses to reserve for host</td>
</tr>
<tr class="field-even field"><th class="field-name">param bridge:</th><td class="field-body">override bridge name</td>
</tr>
<tr class="field-odd field"><th class="field-name">param off:</th><td class="field-body">put this int he config, but disable it.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="file">
<h3>File<a class="headerlink" href="api.html#file" title="Permalink to this headline">¶</a></h3>
<p>Manage a FileStorage object.</p>
<blockquote>
<div>The file is identified by its filename and owner.</div></blockquote>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/files/{filename}/</span></code></dt>
<dd>Delete a FileStorage object.</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/files/{filename}/</span></code></dt>
<dd><p class="first">GET a FileStorage object as a json object.</p>
<p class="last">The &#8216;content&#8217; of the file is base64-encoded.</p>
</dd>
</dl>
</div>
<div class="section" id="files">
<h3>Files<a class="headerlink" href="api.html#files" title="Permalink to this headline">¶</a></h3>
<p>Manage the collection of all the files in this MAAS.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/files/</span></code></dt>
<dd><p class="first">Delete a FileStorage object.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param filename:</th><td class="field-body">The filename of the object to be deleted.</td>
</tr>
<tr class="field-even field"><th class="field-name">type filename:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/files/</span></code></dt>
<dd><p class="first">List the files from the file storage.</p>
<p>The returned files are ordered by file name and the content is
excluded.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param prefix:</th><td class="field-body">Optional prefix used to filter out the returned files.</td>
</tr>
<tr class="field-even field"><th class="field-name">type prefix:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/files/</span></code> <code class="docutils literal"><span class="pre">op=get</span></code></dt>
<dd><p class="first">Get a named file from the file storage.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param filename:</th><td class="field-body">The exact name of the file you want to get.</td>
</tr>
<tr class="field-even field"><th class="field-name">type filename:</th><td class="field-body">string</td>
</tr>
<tr class="field-odd field"><th class="field-name">return:</th><td class="field-body">The file is returned in the response content.</td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/files/</span></code> <code class="docutils literal"><span class="pre">op=get_by_key</span></code></dt>
<dd><p class="first">Get a file from the file storage using its key.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param key:</th><td class="field-body">The exact key of the file you want to get.</td>
</tr>
<tr class="field-even field"><th class="field-name">type key:</th><td class="field-body">string</td>
</tr>
<tr class="field-odd field"><th class="field-name">return:</th><td class="field-body">The file is returned in the response content.</td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/files/</span></code></dt>
<dd><p class="first">Add a new file to the file storage.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param filename:</th><td class="field-body">The file name to use in the storage.</td>
</tr>
<tr class="field-even field"><th class="field-name">type filename:</th><td class="field-body">string</td>
</tr>
<tr class="field-odd field"><th class="field-name">param file:</th><td class="field-body">Actual file data with content type
application/octet-stream</td>
</tr>
</tbody>
</table>
<dl class="last docutils">
<dt>Returns 400 if any of these conditions apply:</dt>
<dd><ul class="first last simple">
<li>The filename is missing from the parameters</li>
<li>The file data is missing</li>
<li>More than one file is supplied</li>
</ul>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="ip-addresses">
<h3>IP Addresses<a class="headerlink" href="api.html#ip-addresses" title="Permalink to this headline">¶</a></h3>
<p>Manage IP addresses allocated by MAAS.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/ipaddresses/</span></code></dt>
<dd><p class="first">List IP addresses known to MAAS.</p>
<p>By default, gets a listing of all IP addresses allocated to the
requesting user.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param ip:</th><td class="field-body">If specified, will only display information for the
specified IP address.</td>
</tr>
<tr class="field-even field"><th class="field-name">type ip:</th><td class="field-body">unicode (must be an IPv4 or IPv6 address)</td>
</tr>
</tbody>
</table>
<p>If the requesting user is a MAAS administrator, the following options
may also be supplied:</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param all:</th><td class="field-body">If True, all reserved IP addresses will be shown. (By
default, only addresses of type &#8216;User reserved&#8217; that are assigned
to the requesting user are shown.)</td>
</tr>
<tr class="field-even field"><th class="field-name">type all:</th><td class="field-body">bool</td>
</tr>
<tr class="field-odd field"><th class="field-name">param owner:</th><td class="field-body">If specified, filters the list to show only IP addresses
owned by the specified username.</td>
</tr>
<tr class="field-even field"><th class="field-name">type user:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/ipaddresses/</span></code> <code class="docutils literal"><span class="pre">op=release</span></code></dt>
<dd><p class="first">Release an IP address that was previously reserved by the user.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param ip:</th><td class="field-body">The IP address to release.</td>
</tr>
<tr class="field-even field"><th class="field-name">type ip:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param force:</th><td class="field-body">If True, allows a MAAS administrator to force an IP
address to be released, even if it is not a user-reserved IP
address or does not belong to the requesting user. Use with
caution.</td>
</tr>
<tr class="field-even field"><th class="field-name">type force:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the provided IP address is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/ipaddresses/</span></code> <code class="docutils literal"><span class="pre">op=reserve</span></code></dt>
<dd><p class="first">Reserve an IP address for use outside of MAAS.</p>
<p>Returns an IP adddress, which MAAS will not allow any of its known
nodes to use; it is free for use by the requesting user until released
by the user.</p>
<p>The user may supply either a subnet or a specific IP address within a
subnet.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param subnet:</th><td class="field-body">CIDR representation of the subnet on which the IP
reservation is required. e.g. 10.1.2.0/24</td>
</tr>
<tr class="field-even field"><th class="field-name">param ip:</th><td class="field-body">The IP address, which must be within
a known subnet.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param ip_address:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">(Deprecated.) Alias for &#8216;ip&#8217; parameter. Provided
for backward compatibility.</td>
</tr>
<tr class="field-even field"><th class="field-name">param hostname:</th><td class="field-body">The hostname to use for the specified IP address.  If
no domain component is given, the default domain will be used.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param mac:</th><td class="field-body">The MAC address that should be linked to this reservation.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 400 if there is no subnet in MAAS matching the provided one,
or a ip_address is supplied, but a corresponding subnet
could not be found.
Returns 503 if there are no more IP addresses available.</p>
</dd>
</dl>
</div>
<div class="section" id="ip-range">
<h3>IP Range<a class="headerlink" href="api.html#ip-range" title="Permalink to this headline">¶</a></h3>
<p>Manage IP range.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/ipranges/{iprange_id}/</span></code></dt>
<dd><p class="first">Delete IP range.</p>
<p class="last">Returns 403 if not owner of IP range.
Returns 404 if the IP range is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/ipranges/{iprange_id}/</span></code></dt>
<dd><p class="first">Read IP range.</p>
<p class="last">Returns 404 if the IP range is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/ipranges/{iprange_id}/</span></code></dt>
<dd><p class="first">Update IP range.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param start_ip:</th><td class="field-body">Start IP address of this range (inclusive).</td>
</tr>
<tr class="field-even field"><th class="field-name">param end_ip:</th><td class="field-body">End IP address of this range (inclusive).</td>
</tr>
</tbody>
</table>
<p class="last">Returns 403 if not owner of IP range.
Returns 404 if the IP Range is not found.</p>
</dd>
</dl>
</div>
<div class="section" id="ip-ranges">
<h3>IP Ranges<a class="headerlink" href="api.html#ip-ranges" title="Permalink to this headline">¶</a></h3>
<p>Manage IP ranges.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/ipranges/</span></code></dt>
<dd>List all IP ranges.</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/ipranges/</span></code></dt>
<dd><p class="first">Create an IP range.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param type:</th><td class="field-body">Type of this range. (<cite>dynamic</cite> or <cite>reserved</cite>)</td>
</tr>
<tr class="field-even field"><th class="field-name">param start_ip:</th><td class="field-body">Start IP address of this range (inclusive).</td>
</tr>
<tr class="field-odd field"><th class="field-name">param end_ip:</th><td class="field-body">End IP address of this range (inclusive).</td>
</tr>
<tr class="field-even field"><th class="field-name">param subnet:</th><td class="field-body">Subnet this range is associated with. (optional)</td>
</tr>
</tbody>
</table>
<p class="last">Returns 403 if standard users tries to create a dynamic IP range.</p>
</dd>
</dl>
</div>
<div class="section" id="interface">
<h3>Interface<a class="headerlink" href="api.html#interface" title="Permalink to this headline">¶</a></h3>
<p>Manage a node&#8217;s or device&#8217;s interface.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/nodes/{system_id}/interfaces/{interface_id}/</span></code></dt>
<dd><p class="first">Delete interface on node.</p>
<p class="last">Returns 404 if the node or interface is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/nodes/{system_id}/interfaces/{interface_id}/</span></code></dt>
<dd><p class="first">Read interface on node.</p>
<p class="last">Returns 404 if the node or interface is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/{system_id}/interfaces/{interface_id}/</span></code> <code class="docutils literal"><span class="pre">op=add_tag</span></code></dt>
<dd><p class="first">Add a tag to interface on a node.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param tag:</th><td class="field-body">The tag being added.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the node or interface is not found.
Returns 403 if the user is not allowed to update the interface.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/{system_id}/interfaces/{interface_id}/</span></code> <code class="docutils literal"><span class="pre">op=link_subnet</span></code></dt>
<dd><p class="first">Link interface to a subnet.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param mode:</th><td class="field-body">AUTO, DHCP, STATIC or LINK_UP connection to subnet.</td>
</tr>
<tr class="field-even field"><th class="field-name">param subnet:</th><td class="field-body">Subnet linked to interface.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param ip_address:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">IP address for the interface in subnet. Only used
when mode is STATIC. If not provided an IP address from subnet
will be auto selected.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param default_gateway:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">True sets the gateway IP address for the subnet
as the default gateway for the node this interface belongs to.
Option can only be used with the AUTO and STATIC modes.</td>
</tr>
</tbody>
</table>
<p>Mode definitions:
AUTO - Assign this interface a static IP address from the provided
subnet. The subnet must be a managed subnet. The IP address will
not be assigned until the node goes to be deployed.</p>
<p>DHCP - Bring this interface up with DHCP on the given subnet. Only
one subnet can be set to DHCP. If the subnet is managed this
interface will pull from the dynamic IP range.</p>
<p>STATIC - Bring this interface up with a STATIC IP address on the
given subnet. Any number of STATIC links can exist on an interface.</p>
<p>LINK_UP - Bring this interface up only on the given subnet. No IP
address will be assigned to this interface. The interface cannot
have any current AUTO, DHCP or STATIC links.</p>
<p class="last">Returns 404 if the node or interface is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/{system_id}/interfaces/{interface_id}/</span></code> <code class="docutils literal"><span class="pre">op=remove_tag</span></code></dt>
<dd><p class="first">Remove a tag from interface on a node.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param tag:</th><td class="field-body">The tag being removed.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the node or interface is not found.
Returns 403 if the user is not allowed to update the interface.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/{system_id}/interfaces/{interface_id}/</span></code> <code class="docutils literal"><span class="pre">op=set_default_gateway</span></code></dt>
<dd><p class="first">Set the node to use this interface as the default gateway.</p>
<p>If this interface has more than one subnet with a gateway IP in the
same IP address family then specifying the ID of the link on
this interface is required.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param link_id:</th><td class="field-body">ID of the link on this interface to select the
default gateway IP address from.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 400 if the interface has not AUTO or STATIC links.
Returns 404 if the node or interface is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/{system_id}/interfaces/{interface_id}/</span></code> <code class="docutils literal"><span class="pre">op=unlink_subnet</span></code></dt>
<dd><p class="first">Unlink interface to a subnet.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param id:</th><td class="field-body">ID of the link on the interface to remove.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the node or interface is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/nodes/{system_id}/interfaces/{interface_id}/</span></code></dt>
<dd><p class="first">Update interface on node.</p>
<p>Fields for physical interface:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the interface.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param mac_address:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">MAC address of the interface.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param tags:</th><td class="field-body">Tags for the interface.</td>
</tr>
<tr class="field-even field"><th class="field-name">param vlan:</th><td class="field-body">Untagged VLAN the interface is connected to.  If not set
then the interface is considered disconnected.</td>
</tr>
</tbody>
</table>
<p>Fields for bond interface:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the interface.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param mac_address:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">MAC address of the interface.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param tags:</th><td class="field-body">Tags for the interface.</td>
</tr>
<tr class="field-even field"><th class="field-name">param vlan:</th><td class="field-body">Untagged VLAN the interface is connected to.  If not set
then the interface is considered disconnected.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param parents:</th><td class="field-body">Parent interfaces that make this bond.</td>
</tr>
</tbody>
</table>
<p>Fields for VLAN interface:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param tags:</th><td class="field-body">Tags for the interface.</td>
</tr>
<tr class="field-even field"><th class="field-name">param vlan:</th><td class="field-body">Tagged VLAN the interface is connected to.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param parent:</th><td class="field-body">Parent interface for this VLAN interface.</td>
</tr>
</tbody>
</table>
<p>Fields for bridge interface:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the interface.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param mac_address:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">MAC address of the interface.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param tags:</th><td class="field-body">Tags for the interface.</td>
</tr>
<tr class="field-even field"><th class="field-name">param vlan:</th><td class="field-body">VLAN the interface is connected to.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param parent:</th><td class="field-body">Parent interface for this bridge interface.</td>
</tr>
</tbody>
</table>
<p>Following are extra parameters that can be set on all interface types:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param mtu:</th><td class="field-body">Maximum transmission unit.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param accept_ra:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Accept router advertisements. (IPv6 only)</td>
</tr>
<tr class="field-odd field"><th class="field-name">param autoconf:</th><td class="field-body">Perform stateless autoconfiguration. (IPv6 only)</td>
</tr>
</tbody>
</table>
<p>Following are parameters specific to bonds:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param bond-mode:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The operating mode of the bond.
(Default: active-backup).</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param bond-miimon:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">The link monitoring freqeuncy in milliseconds.
(Default: 100).</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param bond-downdelay:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Specifies the time, in milliseconds, to wait
before disabling a slave after a link failure has been detected.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param bond-updelay:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Specifies the time, in milliseconds, to wait
before enabling a slave after a link recovery has been detected.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param bond-lacp_rate:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Option specifying the rate in which we&#8217;ll ask
our link partner to transmit LACPDU packets in 802.3ad mode.
Available options are fast or slow. (Default: slow).</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param bond-xmit_hash_policy:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">The transmit hash policy to use for
slave selection in balance-xor, 802.3ad, and tlb modes.</td>
</tr>
</tbody>
</table>
<p>Supported bonding modes (bond-mode):</p>
<p>balance-rr - Transmit packets in sequential order from the first
available slave through the last.  This mode provides load balancing
and fault tolerance.</p>
<p>active-backup - Only one slave in the bond is active.  A different
slave becomes active if, and only if, the active slave fails.  The
bond&#8217;s MAC address is externally visible on only one port (network
adapter) to avoid confusing the switch.</p>
<p>balance-xor - Transmit based on the selected transmit hash policy.
The default policy is a simple [(source MAC address XOR&#8217;d with
destination MAC address XOR packet type ID) modulo slave count].</p>
<p>broadcast - Transmits everything on all slave interfaces. This mode
provides fault tolerance.</p>
<p>802.3ad - IEEE 802.3ad Dynamic link aggregation.  Creates aggregation
groups that share the same speed and duplex settings.  Utilizes all
slaves in the active aggregator according to the 802.3ad specification.</p>
<p>balance-tlb - Adaptive transmit load balancing: channel bonding that
does not require any special switch support.</p>
<p>balance-alb - Adaptive load balancing: includes balance-tlb plus
receive load balancing (rlb) for IPV4 traffic, and does not require any
special switch support.  The receive load balancing is achieved by
ARP negotiation.</p>
<p>Following are parameters specific to bridges:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param bridge_stp:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Turn spanning tree protocol on or off.
(Default: False).</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param bridge_fd:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Set bridge forward delay to time seconds.
(Default: 15).</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the node or interface is not found.</p>
</dd>
</dl>
</div>
<div class="section" id="interfaces">
<h3>Interfaces<a class="headerlink" href="api.html#interfaces" title="Permalink to this headline">¶</a></h3>
<p>Manage interfaces on a node.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/nodes/{system_id}/interfaces/</span></code></dt>
<dd><p class="first">List all interfaces belonging to a machine, device, or
rack controller.</p>
<p class="last">Returns 404 if the node is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/{system_id}/interfaces/</span></code> <code class="docutils literal"><span class="pre">op=create_bond</span></code></dt>
<dd><p class="first">Create a bond interface on a machine.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the interface.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param mac_address:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">MAC address of the interface.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param tags:</th><td class="field-body">Tags for the interface.</td>
</tr>
<tr class="field-even field"><th class="field-name">param vlan:</th><td class="field-body">VLAN the interface is connected to.  If not
provided then the interface is considered disconnected.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param parents:</th><td class="field-body">Parent interfaces that make this bond.</td>
</tr>
</tbody>
</table>
<p>Following are parameters specific to bonds:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param bond_mode:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The operating mode of the bond.
(Default: active-backup).</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param bond_miimon:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">The link monitoring freqeuncy in milliseconds.
(Default: 100).</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param bond_downdelay:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Specifies the time, in milliseconds, to wait
before disabling a slave after a link failure has been detected.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param bond_updelay:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Specifies the time, in milliseconds, to wait
before enabling a slave after a link recovery has been detected.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param bond_lacp_rate:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Option specifying the rate in which we&#8217;ll ask
our link partner to transmit LACPDU packets in 802.3ad mode.
Available options are fast or slow. (Default: slow).</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param bond_xmit_hash_policy:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">The transmit hash policy to use for
slave selection in balance-xor, 802.3ad, and tlb modes.
(Default: layer2)</td>
</tr>
</tbody>
</table>
<p>Supported bonding modes (bond-mode):
balance-rr - Transmit packets in sequential order from the first
available slave through the last.  This mode provides load balancing
and fault tolerance.</p>
<p>active-backup - Only one slave in the bond is active.  A different
slave becomes active if, and only if, the active slave fails.  The
bond&#8217;s MAC address is externally visible on only one port (network
adapter) to avoid confusing the switch.</p>
<p>balance-xor - Transmit based on the selected transmit hash policy.
The default policy is a simple [(source MAC address XOR&#8217;d with
destination MAC address XOR packet type ID) modulo slave count].</p>
<p>broadcast - Transmits everything on all slave interfaces. This mode
provides fault tolerance.</p>
<p>802.3ad - IEEE 802.3ad Dynamic link aggregation.  Creates aggregation
groups that share the same speed and duplex settings.  Utilizes all
slaves in the active aggregator according to the 802.3ad specification.</p>
<p>balance-tlb - Adaptive transmit load balancing: channel bonding that
does not require any special switch support.</p>
<p>balance-alb - Adaptive load balancing: includes balance-tlb plus
receive load balancing (rlb) for IPV4 traffic, and does not require any
special switch support.  The receive load balancing is achieved by
ARP negotiation.</p>
<p>Following are extra parameters that can be set on the interface:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param mtu:</th><td class="field-body">Maximum transmission unit.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param accept_ra:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Accept router advertisements. (IPv6 only)</td>
</tr>
<tr class="field-odd field"><th class="field-name">param autoconf:</th><td class="field-body">Perform stateless autoconfiguration. (IPv6 only)</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the node is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/{system_id}/interfaces/</span></code> <code class="docutils literal"><span class="pre">op=create_bridge</span></code></dt>
<dd><p class="first">Create a bridge interface on a machine.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the interface.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param mac_address:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">MAC address of the interface.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param tags:</th><td class="field-body">Tags for the interface.</td>
</tr>
<tr class="field-even field"><th class="field-name">param vlan:</th><td class="field-body">VLAN the interface is connected to.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param parent:</th><td class="field-body">Parent interface for this bridge interface.</td>
</tr>
</tbody>
</table>
<p>Following are parameters specific to bridges:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param bridge_stp:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Turn spanning tree protocol on or off.
(Default: False).</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param bridge_fd:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Set bridge forward delay to time seconds.
(Default: 15).</td>
</tr>
</tbody>
</table>
<p>Following are extra parameters that can be set on the interface:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param mtu:</th><td class="field-body">Maximum transmission unit.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param accept_ra:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Accept router advertisements. (IPv6 only)</td>
</tr>
<tr class="field-odd field"><th class="field-name">param autoconf:</th><td class="field-body">Perform stateless autoconfiguration. (IPv6 only)</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the node is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/{system_id}/interfaces/</span></code> <code class="docutils literal"><span class="pre">op=create_physical</span></code></dt>
<dd><p class="first">Create a physical interface on a machine and device.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the interface.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param mac_address:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">MAC address of the interface.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param tags:</th><td class="field-body">Tags for the interface.</td>
</tr>
<tr class="field-even field"><th class="field-name">param vlan:</th><td class="field-body">Untagged VLAN the interface is connected to.  If not
provided then the interface is considered disconnected.</td>
</tr>
</tbody>
</table>
<p>Following are extra parameters that can be set on the interface:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param mtu:</th><td class="field-body">Maximum transmission unit.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param accept_ra:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Accept router advertisements. (IPv6 only)</td>
</tr>
<tr class="field-odd field"><th class="field-name">param autoconf:</th><td class="field-body">Perform stateless autoconfiguration. (IPv6 only)</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the node is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/{system_id}/interfaces/</span></code> <code class="docutils literal"><span class="pre">op=create_vlan</span></code></dt>
<dd><p class="first">Create a VLAN interface on a machine.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param tags:</th><td class="field-body">Tags for the interface.</td>
</tr>
<tr class="field-even field"><th class="field-name">param vlan:</th><td class="field-body">Tagged VLAN the interface is connected to.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param parent:</th><td class="field-body">Parent interface for this VLAN interface.</td>
</tr>
</tbody>
</table>
<p>Following are extra parameters that can be set on the interface:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param mtu:</th><td class="field-body">Maximum transmission unit.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param accept_ra:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Accept router advertisements. (IPv6 only)</td>
</tr>
<tr class="field-odd field"><th class="field-name">param autoconf:</th><td class="field-body">Perform stateless autoconfiguration. (IPv6 only)</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the node is not found.</p>
</dd>
</dl>
</div>
<div class="section" id="license-key">
<h3>License Key<a class="headerlink" href="api.html#license-key" title="Permalink to this headline">¶</a></h3>
<p>Manage a license key.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/license-key/{osystem}/{distro_series}</span></code></dt>
<dd>Delete license key.</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/license-key/{osystem}/{distro_series}</span></code></dt>
<dd>Read license key.</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/license-key/{osystem}/{distro_series}</span></code></dt>
<dd><p class="first">Update license key.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param osystem:</th><td class="field-body">Operating system that the key belongs to.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param distro_series:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">OS release that the key belongs to.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param license_key:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">License key for osystem/distro_series combo.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="license-keys">
<h3>License Keys<a class="headerlink" href="api.html#license-keys" title="Permalink to this headline">¶</a></h3>
<p>Manage the license keys.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/license-keys/</span></code></dt>
<dd>List license keys.</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/license-keys/</span></code></dt>
<dd><p class="first">Define a license key.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param osystem:</th><td class="field-body">Operating system that the key belongs to.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param distro_series:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">OS release that the key belongs to.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param license_key:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">License key for osystem/distro_series combo.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="maas-server">
<h3>MAAS server<a class="headerlink" href="api.html#maas-server" title="Permalink to this headline">¶</a></h3>
<p>Manage the MAAS server.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/maas/</span></code> <code class="docutils literal"><span class="pre">op=get_config</span></code></dt>
<dd><p class="first">Get a config value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">The name of the config item to be retrieved.</td>
</tr>
</tbody>
</table>
<p>Available configuration items:</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">active_discovery_interval:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Active discovery interval.         If network discovery is enabled, MAAS will periodically scan subnets enabled for active discovery. This helps MAAS determine IP address utilization, and discover new devices that have not been observed passively. When the specified scan period elapses, MAAS will ask each connected rack controller to scan for connected neighbours on each configured subnet.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">boot_images_auto_import:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Automatically import/refresh the boot images every 60 minutes.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">commissioning_distro_series:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Default Ubuntu release used for commissioning.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">completed_intro:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Marks if the initial intro has been completed..</td>
</tr>
<tr class="field-odd field"><th class="field-name">curtin_verbose:</th><td class="field-body">Run the fast-path installer with higher verbosity. This provides more detail in the installation logs..</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">default_distro_series:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Default OS release used for deployment.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">default_dns_ttl:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Default Time-To-Live for the DNS..         If no TTL value is specified at a more specific point this is how long DNS responses are valid, in seconds.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">default_min_hwe_kernel:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Default Minimum Kernel Version.         The default minimum kernel version used on all new and commissioned nodes.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">default_osystem:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Default operating system used for deployment.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">default_storage_layout:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Default storage layout.         Storage layout that is applied to a node when it is commissioned.        Available choices are: &#8216;bcache&#8217; (Bcache layout), &#8216;flat&#8217; (Flat layout), &#8216;lvm&#8217; (LVM layout).</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">disk_erase_with_quick_erase:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Use quick erase by default when erasing disks..         This is not a secure erase; it wipes only the beginning and end of each disk.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">disk_erase_with_secure_erase:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Use secure erase by default when erasing disks..         Will only be used on devices that support secure erase.  Other devices will fall back to full wipe or quick erase depending on the selected options.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">dnssec_validation:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Enable DNSSEC validation of upstream zones.         Only used when MAAS is running its own DNS server. This value is used as the value of &#8216;dnssec_validation&#8217; in the DNS server config.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">enable_analytics:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Enable MAAS UI usage of Google Analytics. This helps the developers of MAAS to identify usage statistics to further development..</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">enable_disk_erasing_on_release:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Erase nodes&#8217; disks prior to releasing..         Forces users to always erase disks when releasing.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">enable_http_proxy:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Enable the use of an APT and HTTP/HTTPS proxy.         Provision nodes to use the built-in HTTP proxy (or user specified proxy) for APT. MAAS also uses the proxy for downloading boot images.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">enable_third_party_drivers:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Enable the installation of proprietary drivers (i.e. HPVSA).</td>
</tr>
<tr class="field-even field"><th class="field-name">http_proxy:</th><td class="field-body">Proxy for APT and HTTP/HTTPS.         This will be passed onto provisioned nodes to use as a proxy for APT traffic. MAAS also uses the proxy for downloading boot images. If no URL is provided, the built-in MAAS proxy will be used.</td>
</tr>
<tr class="field-odd field"><th class="field-name">kernel_opts:</th><td class="field-body">Boot parameters to pass to the kernel by default.</td>
</tr>
<tr class="field-even field"><th class="field-name">maas_name:</th><td class="field-body">MAAS name.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">network_discovery:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Host discovery and network observation.         If network discovery is enabled, MAAS will use passive techniques to observe networks attached to rack controllers, such as listening to ARP requests and mDNS advertisements. Each subnet can be configured for active neighbour discovery, which will cause MAAS to periodically scan for neighbours on that subnet. If network discovery is disabled, MAAS will neither listen for any neighbours, nor actively scan any subnets.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">ntp_external_only:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Use external NTP servers only.         Configure all region controller hosts, rack controller hosts, and subsequently deployed machines to refer directly to the configured external NTP servers. Otherwise only region controller hosts will be configured to use those external NTP servers, rack contoller hosts will in turn refer to the regions&#8217; NTP servers, and deployed machines will refer to the racks&#8217; NTP servers.</td>
</tr>
<tr class="field-odd field"><th class="field-name">ntp_servers:</th><td class="field-body">Addresses of NTP servers.         NTP servers, specified as IP addresses or hostnames delimited by commas and/or spaces, to be used as time references for MAAS itself, the machines MAAS deploys, and devices that make use of MAAS&#8217;s DHCP services.</td>
</tr>
<tr class="field-even field"><th class="field-name">upstream_dns:</th><td class="field-body">Upstream DNS used to resolve domains not managed by this MAAS (space-separated IP addresses).         Only used when MAAS is running its own DNS server. This value is used as the value of &#8216;forwarders&#8217; in the DNS server config.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">windows_kms_host:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Windows KMS activation host.         FQDN or IP address of the host that provides the KMS Windows activation service. (Only needed for Windows deployments using KMS activation.)</td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/maas/</span></code> <code class="docutils literal"><span class="pre">op=set_config</span></code></dt>
<dd><p class="first">Set a config value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">The name of the config item to be set.</td>
</tr>
<tr class="field-even field"><th class="field-name">param value:</th><td class="field-body">The value of the config item to be set.</td>
</tr>
</tbody>
</table>
<p>Available configuration items:</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">active_discovery_interval:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Active discovery interval.         If network discovery is enabled, MAAS will periodically scan subnets enabled for active discovery. This helps MAAS determine IP address utilization, and discover new devices that have not been observed passively. When the specified scan period elapses, MAAS will ask each connected rack controller to scan for connected neighbours on each configured subnet.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">boot_images_auto_import:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Automatically import/refresh the boot images every 60 minutes.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">commissioning_distro_series:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Default Ubuntu release used for commissioning.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">completed_intro:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Marks if the initial intro has been completed..</td>
</tr>
<tr class="field-odd field"><th class="field-name">curtin_verbose:</th><td class="field-body">Run the fast-path installer with higher verbosity. This provides more detail in the installation logs..</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">default_distro_series:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Default OS release used for deployment.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">default_dns_ttl:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Default Time-To-Live for the DNS..         If no TTL value is specified at a more specific point this is how long DNS responses are valid, in seconds.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">default_min_hwe_kernel:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Default Minimum Kernel Version.         The default minimum kernel version used on all new and commissioned nodes.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">default_osystem:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Default operating system used for deployment.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">default_storage_layout:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Default storage layout.         Storage layout that is applied to a node when it is commissioned.        Available choices are: &#8216;bcache&#8217; (Bcache layout), &#8216;flat&#8217; (Flat layout), &#8216;lvm&#8217; (LVM layout).</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">disk_erase_with_quick_erase:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Use quick erase by default when erasing disks..         This is not a secure erase; it wipes only the beginning and end of each disk.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">disk_erase_with_secure_erase:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Use secure erase by default when erasing disks..         Will only be used on devices that support secure erase.  Other devices will fall back to full wipe or quick erase depending on the selected options.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">dnssec_validation:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Enable DNSSEC validation of upstream zones.         Only used when MAAS is running its own DNS server. This value is used as the value of &#8216;dnssec_validation&#8217; in the DNS server config.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">enable_analytics:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Enable MAAS UI usage of Google Analytics. This helps the developers of MAAS to identify usage statistics to further development..</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">enable_disk_erasing_on_release:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Erase nodes&#8217; disks prior to releasing..         Forces users to always erase disks when releasing.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">enable_http_proxy:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Enable the use of an APT and HTTP/HTTPS proxy.         Provision nodes to use the built-in HTTP proxy (or user specified proxy) for APT. MAAS also uses the proxy for downloading boot images.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">enable_third_party_drivers:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Enable the installation of proprietary drivers (i.e. HPVSA).</td>
</tr>
<tr class="field-even field"><th class="field-name">http_proxy:</th><td class="field-body">Proxy for APT and HTTP/HTTPS.         This will be passed onto provisioned nodes to use as a proxy for APT traffic. MAAS also uses the proxy for downloading boot images. If no URL is provided, the built-in MAAS proxy will be used.</td>
</tr>
<tr class="field-odd field"><th class="field-name">kernel_opts:</th><td class="field-body">Boot parameters to pass to the kernel by default.</td>
</tr>
<tr class="field-even field"><th class="field-name">maas_name:</th><td class="field-body">MAAS name.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">network_discovery:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Host discovery and network observation.         If network discovery is enabled, MAAS will use passive techniques to observe networks attached to rack controllers, such as listening to ARP requests and mDNS advertisements. Each subnet can be configured for active neighbour discovery, which will cause MAAS to periodically scan for neighbours on that subnet. If network discovery is disabled, MAAS will neither listen for any neighbours, nor actively scan any subnets.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">ntp_external_only:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Use external NTP servers only.         Configure all region controller hosts, rack controller hosts, and subsequently deployed machines to refer directly to the configured external NTP servers. Otherwise only region controller hosts will be configured to use those external NTP servers, rack contoller hosts will in turn refer to the regions&#8217; NTP servers, and deployed machines will refer to the racks&#8217; NTP servers.</td>
</tr>
<tr class="field-odd field"><th class="field-name">ntp_servers:</th><td class="field-body">Addresses of NTP servers.         NTP servers, specified as IP addresses or hostnames delimited by commas and/or spaces, to be used as time references for MAAS itself, the machines MAAS deploys, and devices that make use of MAAS&#8217;s DHCP services.</td>
</tr>
<tr class="field-even field"><th class="field-name">upstream_dns:</th><td class="field-body">Upstream DNS used to resolve domains not managed by this MAAS (space-separated IP addresses).         Only used when MAAS is running its own DNS server. This value is used as the value of &#8216;forwarders&#8217; in the DNS server config.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">windows_kms_host:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Windows KMS activation host.         FQDN or IP address of the host that provides the KMS Windows activation service. (Only needed for Windows deployments using KMS activation.)</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="machine">
<h3>Machine<a class="headerlink" href="api.html#machine" title="Permalink to this headline">¶</a></h3>
<p>Manage an individual Machine.</p>
<blockquote>
<div>The Machine is identified by its system_id.</div></blockquote>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/machines/{system_id}/</span></code></dt>
<dd><p class="first">Delete a specific Node.</p>
<p class="last">Returns 404 if the node is not found.
Returns 403 if the user does not have permission to delete the node.
Returns 204 if the node is successfully deleted.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/machines/{system_id}/</span></code></dt>
<dd><p class="first">Read a specific Node.</p>
<p class="last">Returns 404 if the node is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/machines/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=details</span></code></dt>
<dd><p class="first">Obtain various system details.</p>
<p>For example, LLDP and <code class="docutils literal"><span class="pre">lshw</span></code> XML dumps.</p>
<p>Returns a <code class="docutils literal"><span class="pre">{detail_type:</span> <span class="pre">xml,</span> <span class="pre">...}</span></code> map, where
<code class="docutils literal"><span class="pre">detail_type</span></code> is something like &#8220;lldp&#8221; or &#8220;lshw&#8221;.</p>
<p>Note that this is returned as BSON and not JSON. This is for
efficiency, but mainly because JSON can&#8217;t do binary content
without applying additional encoding like base-64.</p>
<p class="last">Returns 404 if the node is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/machines/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=get_curtin_config</span></code></dt>
<dd><p class="first">Return the rendered curtin configuration for the machine.</p>
<p class="last">Returns 404 if the machine could not be found.
Returns 403 if the user does not have permission to get the curtin
configuration.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/machines/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=power_parameters</span></code></dt>
<dd><p class="first">Obtain power parameters.</p>
<p>This method is reserved for admin users and returns a 403 if the
user is not one.</p>
<p>This returns the power parameters, if any, configured for a
node. For some types of power control this will include private
information such as passwords and secret keys.</p>
<p class="last">Returns 404 if the node is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/machines/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=query_power_state</span></code></dt>
<dd><p class="first">Query the power state of a node.</p>
<p>Send a request to the node&#8217;s power controller which asks it about
the node&#8217;s state.  The reply to this could be delayed by up to
30 seconds while waiting for the power controller to respond.
Use this method sparingly as it ties up an appserver thread
while waiting.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param system_id:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The node to query.</td>
</tr>
<tr class="field-even field"><th class="field-name">return:</th><td class="field-body">a dict whose key is &#8220;state&#8221; with a value of one of
&#8216;on&#8217; or &#8216;off&#8217;.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the node is not found.
Returns node&#8217;s power state.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/machines/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=abort</span></code></dt>
<dd><p class="first">Abort a machine&#8217;s current operation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param comment:</th><td class="field-body">Optional comment for the event log.</td>
</tr>
<tr class="field-even field"><th class="field-name">type comment:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>This currently only supports aborting of the &#8216;Disk Erasing&#8217; operation.</p>
<p class="last">Returns 404 if the machine could not be found.
Returns 403 if the user does not have permission to abort the
current operation.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/machines/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=clear_default_gateways</span></code></dt>
<dd><p class="first">Clear any set default gateways on the machine.</p>
<p>This will clear both IPv4 and IPv6 gateways on the machine. This will
transition the logic of identifing the best gateway to MAAS. This logic
is determined based the following criteria:</p>
<ol class="arabic simple">
<li>Managed subnets over unmanaged subnets.</li>
<li>Bond interfaces over physical interfaces.</li>
<li>Machine&#8217;s boot interface over all other interfaces except bonds.</li>
<li>Physical interfaces over VLAN interfaces.</li>
<li>Sticky IP links over user reserved IP links.</li>
<li>User reserved IP links over auto IP links.</li>
</ol>
<p>If the default gateways need to be specific for this machine you can
set which interface and subnet&#8217;s gateway to use when this machine is
deployed with the <cite>interfaces set-default-gateway</cite> API.</p>
<p class="last">Returns 404 if the machine could not be found.
Returns 403 if the user does not have permission to clear the default
gateways.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/machines/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=commission</span></code></dt>
<dd><p class="first">Begin commissioning process for a machine.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param enable_ssh:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Whether to enable SSH for the commissioning
environment using the user&#8217;s SSH key(s).</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type enable_ssh:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">bool (&#8216;0&#8217; for False, &#8216;1&#8217; for True)</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param skip_networking:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Whether to skip re-configuring the networking
on the machine after the commissioning has completed.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type skip_networking:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">bool (&#8216;0&#8217; for False, &#8216;1&#8217; for True)</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param skip_storage:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Whether to skip re-configuring the storage
on the machine after the commissioning has completed.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type skip_storage:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">bool (&#8216;0&#8217; for False, &#8216;1&#8217; for True)</td>
</tr>
</tbody>
</table>
<p>A machine in the &#8216;ready&#8217;, &#8216;declared&#8217; or &#8216;failed test&#8217; state may
initiate a commissioning cycle where it is checked out and tested
in preparation for transitioning to the &#8216;ready&#8217; state. If it is
already in the &#8216;ready&#8217; state this is considered a re-commissioning
process which is useful if commissioning tests were changed after
it previously commissioned.</p>
<p class="last">Returns 404 if the machine is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/machines/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=deploy</span></code></dt>
<dd><p class="first">Deploy an operating system to a machine.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param user_data:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">If present, this blob of user-data to be made
available to the machines through the metadata service.</td>
</tr>
<tr class="field-even field"><th class="field-name">type user_data:</th><td class="field-body">base64-encoded unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param distro_series:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">If present, this parameter specifies the
OS release the machine will use.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type distro_series:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param hwe_kernel:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">If present, this parameter specified the kernel to
be used on the machine</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type hwe_kernel:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param comment:</th><td class="field-body">Optional comment for the event log.</td>
</tr>
<tr class="field-even field"><th class="field-name">type comment:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>Ideally we&#8217;d have MIME multipart and content-transfer-encoding etc.
deal with the encapsulation of binary data, but couldn&#8217;t make it work
with the framework in reasonable time so went for a dumb, manual
encoding instead.</p>
<p class="last">Returns 404 if the machine is not found.
Returns 403 if the user does not have permission to start the machine.
Returns 503 if the start-up attempted to allocate an IP address,
and there were no IP addresses available on the relevant cluster
interface.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/machines/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=exit_rescue_mode</span></code></dt>
<dd><p class="first">Exit rescue mode process for a machine.</p>
<p>A machine in the &#8216;rescue mode&#8217; state may exit the rescue mode
process.</p>
<p class="last">Returns 404 if the machine is not found.
Returns 403 if the user does not have permission to exit the
rescue mode process for this machine.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/machines/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=mark_broken</span></code></dt>
<dd><p class="first">Mark a node as &#8216;broken&#8217;.</p>
<p>If the node is allocated, release it first.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param comment:</th><td class="field-body">Optional comment for the event log. Will be
displayed on the node as an error description until marked fixed.</td>
</tr>
<tr class="field-even field"><th class="field-name">type comment:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the node is not found.
Returns 403 if the user does not have permission to mark the node
broken.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/machines/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=mark_fixed</span></code></dt>
<dd><p class="first">Mark a broken node as fixed and set its status as &#8216;ready&#8217;.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param comment:</th><td class="field-body">Optional comment for the event log.</td>
</tr>
<tr class="field-even field"><th class="field-name">type comment:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the machine is not found.
Returns 403 if the user does not have permission to mark the machine
fixed.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/machines/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=mount_special</span></code></dt>
<dd><p class="first">Mount a special-purpose filesystem, like tmpfs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param fstype:</th><td class="field-body">The filesystem type. This must be a filesystem that
does not require a block special device.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param mount_point:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Path on the filesystem to mount.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param mount_option:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Options to pass to mount(8).</td>
</tr>
</tbody>
</table>
<p class="last">Returns 403 when the user is not permitted to mount the partition.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/machines/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=power_off</span></code></dt>
<dd><p class="first">Power off a node.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param stop_mode:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">An optional power off mode. If &#8216;soft&#8217;,
perform a soft power down if the node&#8217;s power type supports
it, otherwise perform a hard power off. For all values other
than &#8216;soft&#8217;, and by default, perform a hard power off. A
soft power off generally asks the OS to shutdown the system
gracefully before powering off, while a hard power off
occurs immediately without any warning to the OS.</td>
</tr>
<tr class="field-even field"><th class="field-name">type stop_mode:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param comment:</th><td class="field-body">Optional comment for the event log.</td>
</tr>
<tr class="field-even field"><th class="field-name">type comment:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the node is not found.
Returns 403 if the user does not have permission to stop the node.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/machines/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=power_on</span></code></dt>
<dd><p class="first">Turn on a node.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param user_data:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">If present, this blob of user-data to be made
available to the nodes through the metadata service.</td>
</tr>
<tr class="field-even field"><th class="field-name">type user_data:</th><td class="field-body">base64-encoded unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param comment:</th><td class="field-body">Optional comment for the event log.</td>
</tr>
<tr class="field-even field"><th class="field-name">type comment:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>Ideally we&#8217;d have MIME multipart and content-transfer-encoding etc.
deal with the encapsulation of binary data, but couldn&#8217;t make it work
with the framework in reasonable time so went for a dumb, manual
encoding instead.</p>
<p class="last">Returns 404 if the node is not found.
Returns 403 if the user does not have permission to start the machine.
Returns 503 if the start-up attempted to allocate an IP address,
and there were no IP addresses available on the relevant cluster
interface.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/machines/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=release</span></code></dt>
<dd><p class="first">Release a machine. Opposite of <cite>Machines.allocate</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param comment:</th><td class="field-body">Optional comment for the event log.</td>
</tr>
<tr class="field-even field"><th class="field-name">type comment:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param erase:</th><td class="field-body">Erase the disk when releasing.</td>
</tr>
<tr class="field-even field"><th class="field-name">type erase:</th><td class="field-body">boolean</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param secure_erase:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Use the drive&#8217;s secure erase feature if available.
In some cases this can be much faster than overwriting the drive.
Some drives implement secure erasure by overwriting themselves so
this could still be slow.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type secure_erase:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">boolean</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param quick_erase:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Wipe 1MiB at the start and at the end of the drive
to make data recovery inconvenient and unlikely to happen by
accident. This is not secure.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type quick_erase:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">boolean</td>
</tr>
</tbody>
</table>
<p>If neither secure_erase nor quick_erase are specified, MAAS will
overwrite the whole disk with null bytes. This can be very slow.</p>
<p>If both secure_erase and quick_erase are specified and the drive does
NOT have a secure erase feature, MAAS will behave as if only
quick_erase was specified.</p>
<p>If secure_erase is specified and quick_erase is NOT specified and the
drive does NOT have a secure erase feature, MAAS will behave as if
secure_erase was NOT specified, i.e. will overwrite the whole disk
with null bytes. This can be very slow.</p>
<p class="last">Returns 404 if the machine is not found.
Returns 403 if the user doesn&#8217;t have permission to release the machine.
Returns 409 if the machine is in a state where it may not be released.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/machines/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=rescue_mode</span></code></dt>
<dd><p class="first">Begin rescue mode process for a machine.</p>
<p>A machine in the &#8216;deployed&#8217; or &#8216;broken&#8217; state may initiate the
rescue mode process.</p>
<p class="last">Returns 404 if the machine is not found.
Returns 403 if the user does not have permission to start the
rescue mode process for this machine.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/machines/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=restore_default_configuration</span></code></dt>
<dd><p class="first">Reset a machine&#8217;s configuration to its initial state.</p>
<p class="last">Returns 404 if the machine is not found.
Returns 403 if the user does not have permission to reset the machine.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/machines/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=restore_networking_configuration</span></code></dt>
<dd><p class="first">Reset a machine&#8217;s networking options to its initial state.</p>
<p class="last">Returns 404 if the machine is not found.
Returns 403 if the user does not have permission to reset the machine.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/machines/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=restore_storage_configuration</span></code></dt>
<dd><p class="first">Reset a machine&#8217;s storage options to its initial state.</p>
<p class="last">Returns 404 if the machine is not found.
Returns 403 if the user does not have permission to reset the machine.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/machines/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=set_owner_data</span></code></dt>
<dd><p class="first">Set key/value data for the current owner.</p>
<p>Pass any key/value data to this method to add, modify, or remove. A key
is removed when the value for that key is set to an empty string.</p>
<p>This operation will not remove any previous keys unless explicitly
passed with an empty string. All owner data is removed when the machine
is no longer allocated to a user.</p>
<p class="last">Returns 404 if the machine is not found.
Returns 403 if the user does not have permission.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/machines/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=set_storage_layout</span></code></dt>
<dd><p class="first">Changes the storage layout on the machine.</p>
<p>This can only be preformed on an allocated machine.</p>
<p>Note: This will clear the current storage layout and any extra
configuration and replace it will the new layout.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param storage_layout:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Storage layout for the machine. (flat, lvm,
and bcache)</td>
</tr>
</tbody>
</table>
<p>The following are optional for all layouts:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param boot_size:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Size of the boot partition.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param root_size:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Size of the root partition.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param root_device:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Physical block device to place the root partition.</td>
</tr>
</tbody>
</table>
<p>The following are optional for LVM:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param vg_name:</th><td class="field-body">Name of created volume group.</td>
</tr>
<tr class="field-even field"><th class="field-name">param lv_name:</th><td class="field-body">Name of created logical volume.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param lv_size:</th><td class="field-body">Size of created logical volume.</td>
</tr>
</tbody>
</table>
<p>The following are optional for Bcache:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param cache_device:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Physical block device to use as the cache device.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param cache_mode:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Cache mode for bcache device. (writeback,
writethrough, writearound)</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param cache_size:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Size of the cache partition to create on the cache
device.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param cache_no_part:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Don&#8217;t create a partition on the cache device.
Use the entire disk as the cache device.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 400 if the machine is currently not allocated.
Returns 404 if the machine could not be found.
Returns 403 if the user does not have permission to set the storage
layout.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/machines/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=unmount_special</span></code></dt>
<dd><p class="first">Unmount a special-purpose filesystem, like tmpfs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param mount_point:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Path on the filesystem to unmount.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 403 when the user is not permitted to unmount the partition.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/machines/{system_id}/</span></code></dt>
<dd><p class="first">Update a specific Machine.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param hostname:</th><td class="field-body">The new hostname for this machine.</td>
</tr>
<tr class="field-even field"><th class="field-name">type hostname:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param domain:</th><td class="field-body">The domain for this machine. If not given the default
domain is used.</td>
</tr>
<tr class="field-even field"><th class="field-name">type domain:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param architecture:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The new architecture for this machine.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type architecture:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param min_hwe_kernel:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">A string containing the minimum kernel version
allowed to be ran on this machine.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type min_hwe_kernel:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param power_type:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The new power type for this machine. If you use the
default value, power_parameters will be set to the empty string.
Available to admin users.
See the <a class="reference internal" href="api.html#power-types">Power types</a> section for a list of the available power
types.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type power_type:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param power_parameters_{param1}:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The new value for the &#8216;param1&#8217;
power parameter.  Note that this is dynamic as the available
parameters depend on the selected value of the Machine&#8217;s
power_type.  Available to admin users. See the <a class="reference internal" href="api.html#power-types">Power types</a>
section for a list of the available power parameters for each
power type.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type power_parameters_{param1}:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param power_parameters_skip_check:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Whether or not the new power
parameters for this machine should be checked against the expected
power parameters for the machine&#8217;s power type (&#8216;true&#8217; or &#8216;false&#8217;).
The default is &#8216;false&#8217;.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type power_parameters_skip_check:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param zone:</th><td class="field-body">Name of a valid physical zone in which to place this
machine.</td>
</tr>
<tr class="field-even field"><th class="field-name">type zone:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param swap_size:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Specifies the size of the swap file, in bytes. Field
accept K, M, G and T suffixes for values expressed respectively in
kilobytes, megabytes, gigabytes and terabytes.</td>
</tr>
<tr class="field-even field"><th class="field-name">type swap_size:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param disable_ipv4:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Deprecated.  If specified, must be False.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type disable_ipv4:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">boolean</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param cpu_count:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The amount of CPU cores the machine has.</td>
</tr>
<tr class="field-even field"><th class="field-name">type cpu_count:</th><td class="field-body">integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">param memory:</th><td class="field-body">How much memory the machine has.</td>
</tr>
<tr class="field-even field"><th class="field-name">type memory:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the machine is not found.
Returns 403 if the user does not have permission to update the machine.</p>
</dd>
</dl>
</div>
<div class="section" id="machines">
<h3>Machines<a class="headerlink" href="api.html#machines" title="Permalink to this headline">¶</a></h3>
<p>Manage the collection of all the machines in the MAAS.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/machines/</span></code></dt>
<dd><p class="first">List Nodes visible to the user, optionally filtered by criteria.</p>
<p>Nodes are sorted by id (i.e. most recent last) and grouped by type.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param hostname:</th><td class="field-body">An optional hostname. Only nodes relating to the node
with the matching hostname will be returned. This can be specified
multiple times to see multiple nodes.</td>
</tr>
<tr class="field-even field"><th class="field-name">type hostname:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param mac_address:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">An optional MAC address. Only nodes relating to the
node owning the specified MAC address will be returned. This can be
specified multiple times to see multiple nodes.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type mac_address:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param id:</th><td class="field-body">An optional list of system ids.  Only nodes relating to the
nodes with matching system ids will be returned.</td>
</tr>
<tr class="field-even field"><th class="field-name">type id:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param domain:</th><td class="field-body">An optional name for a dns domain. Only nodes relating
to the nodes in the domain will be returned.</td>
</tr>
<tr class="field-even field"><th class="field-name">type domain:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param zone:</th><td class="field-body">An optional name for a physical zone. Only nodes relating
to the nodes in the zone will be returned.</td>
</tr>
<tr class="field-even field"><th class="field-name">type zone:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param agent_name:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">An optional agent name.  Only nodes relating to the
nodes with matching agent names will be returned.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type agent_name:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/machines/</span></code> <code class="docutils literal"><span class="pre">op=list_allocated</span></code></dt>
<dd>Fetch Machines that were allocated to the User/oauth token.</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/machines/</span></code> <code class="docutils literal"><span class="pre">op=power_parameters</span></code></dt>
<dd><p class="first">Retrieve power parameters for multiple machines.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param id:</th><td class="field-body">An optional list of system ids.  Only machines with
matching system ids will be returned.</td>
</tr>
<tr class="field-even field"><th class="field-name">type id:</th><td class="field-body">iterable</td>
</tr>
<tr class="field-odd field"><th class="field-name">return:</th><td class="field-body">A dictionary of power parameters, keyed by machine system_id.</td>
</tr>
</tbody>
</table>
<p class="last">Raises 403 if the user is not an admin.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/machines/</span></code></dt>
<dd><p class="first">Create a new Machine.</p>
<p>Adding a server to MAAS puts it on a path that will wipe its disks
and re-install its operating system, in the event that it PXE boots.
In anonymous enlistment (and when the enlistment is done by a
non-admin), the machine is held in the &#8220;New&#8221; state for approval by a
MAAS admin.</p>
<p>The minimum data required is:
architecture=&lt;arch string&gt; (e.g. &#8220;i386/generic&#8221;)
mac_addresses=&lt;value&gt; (e.g. &#8220;aa:bb:cc:dd:ee:ff&#8221;)</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param architecture:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">A string containing the architecture type of
the machine. (For example, &#8220;i386&#8221;, or &#8220;amd64&#8221;.) To determine the
supported architectures, use the boot-resources endpoint.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type architecture:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param min_hwe_kernel:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">A string containing the minimum kernel version
allowed to be ran on this machine.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type min_hwe_kernel:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param subarchitecture:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">A string containing the subarchitecture type
of the machine. (For example, &#8220;generic&#8221; or &#8220;hwe-t&#8221;.) To determine
the supported subarchitectures, use the boot-resources endpoint.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type subarchitecture:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param mac_addresses:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">One or more MAC addresses for the machine. To
specify more than one MAC address, the parameter must be specified
twice. (such as &#8220;machines new mac_addresses=01:02:03:04:05:06
mac_addresses=02:03:04:05:06:07&#8221;)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type mac_addresses:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param hostname:</th><td class="field-body">A hostname. If not given, one will be generated.</td>
</tr>
<tr class="field-even field"><th class="field-name">type hostname:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param domain:</th><td class="field-body">The domain of the machine. If not given the default
domain is used.</td>
</tr>
<tr class="field-even field"><th class="field-name">type domain:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param power_type:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">A power management type, if applicable (e.g.
&#8220;virsh&#8221;, &#8220;ipmi&#8221;).</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type power_type:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/machines/</span></code> <code class="docutils literal"><span class="pre">op=accept</span></code></dt>
<dd><p class="first">Accept declared machines into the MAAS.</p>
<p>Machines can be enlisted in the MAAS anonymously or by non-admin users,
as opposed to by an admin.  These machines are held in the New
state; a MAAS admin must first verify the authenticity of these
enlistments, and accept them.</p>
<p>Enlistments can be accepted en masse, by passing multiple machines to
this call.  Accepting an already accepted machine is not an error, but
accepting one that is already allocated, broken, etc. is.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param machines:</th><td class="field-body">system_ids of the machines whose enlistment is to be
accepted.  (An empty list is acceptable).</td>
</tr>
<tr class="field-even field"><th class="field-name">return:</th><td class="field-body">The system_ids of any machines that have their status changed
by this call.  Thus, machines that were already accepted are
excluded from the result.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 400 if any of the machines do not exist.
Returns 403 if the user is not an admin.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/machines/</span></code> <code class="docutils literal"><span class="pre">op=accept_all</span></code></dt>
<dd><p class="first">Accept all declared machines into the MAAS.</p>
<p>Machines can be enlisted in the MAAS anonymously or by non-admin users,
as opposed to by an admin.  These machines are held in the New
state; a MAAS admin must first verify the authenticity of these
enlistments, and accept them.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">return:</th><td class="field-body">Representations of any machines that have their status changed
by this call.  Thus, machines that were already accepted are
excluded from the result.</td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/machines/</span></code> <code class="docutils literal"><span class="pre">op=add_chassis</span></code></dt>
<dd><p class="first">Add special hardware types.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param chassis_type:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The type of hardware.
mscm is the type for the Moonshot Chassis Manager.
msftocs is the type for the Microsoft OCS Chassis Manager.
powerkvm is the type for Virtual Machines on Power KVM,
managed by Virsh.
seamicro15k is the type for the Seamicro 1500 Chassis.
ucsm is the type for the Cisco UCS Manager.
virsh is the type for virtual machines managed by Virsh.
vmware is the type for virtual machines managed by VMware.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type chassis_type:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param hostname:</th><td class="field-body">The URL, hostname, or IP address to access the
chassis.</td>
</tr>
<tr class="field-even field"><th class="field-name">type url:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param username:</th><td class="field-body">The username used to access the chassis. This field
is required for the seamicro15k, vmware, mscm, msftocs, and ucsm
chassis types.</td>
</tr>
<tr class="field-even field"><th class="field-name">type username:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param password:</th><td class="field-body">The password used to access the chassis. This field
is required for the seamicro15k, vmware, mscm, msftocs, and ucsm
chassis types.</td>
</tr>
<tr class="field-even field"><th class="field-name">type password:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param accept_all:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">If true, all enlisted machines will be
commissioned.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type accept_all:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param rack_controller:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The system_id of the rack controller to send
the add chassis command through. If none is specifed MAAS will
automatically determine the rack controller to use.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type rack_controller:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param domain:</th><td class="field-body">The domain that each new machine added should use.</td>
</tr>
<tr class="field-even field"><th class="field-name">type domain:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The following are optional if you are adding a virsh, vmware, or
powerkvm chassis:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param prefix_filter:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Filter machines with supplied prefix.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type prefix_filter:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The following are optional if you are adding a seamicro15k chassis:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param power_control:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The power_control to use, either ipmi (default),
restapi, or restapi2.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type power_control:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The following are optional if you are adding a vmware or msftocs
chassis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param port:</th><td class="field-body">The port to use when accessing the chassis.</td>
</tr>
<tr class="field-even field"><th class="field-name">type port:</th><td class="field-body">integer</td>
</tr>
</tbody>
</table>
<p>The following are optioanl if you are adding a vmware chassis:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param protocol:</th><td class="field-body">The protocol to use when accessing the VMware
chassis (default: https).</td>
</tr>
<tr class="field-even field"><th class="field-name">type protocol:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">return:</th><td class="field-body">A string containing the chassis powered on by which rack
controller.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if no rack controller can be found which has access to the
given URL.
Returns 403 if the user does not have access to the rack controller.
Returns 400 if the required parameters were not passed.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/machines/</span></code> <code class="docutils literal"><span class="pre">op=allocate</span></code></dt>
<dd><p class="first">Allocate an available machine for deployment.</p>
<p>Constraints parameters can be used to allocate a machine that possesses
certain characteristics.  All the constraints are optional and when
multiple constraints are provided, they are combined using &#8216;AND&#8217;
semantics.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body"><p class="first">Hostname of the desired machine.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">type name:</th><td class="field-body"><p class="first">unicode</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param system_id:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">system_id of the desired machine.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">type system_id:</th><td class="field-body"><p class="first">unicode</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">param arch:</th><td class="field-body"><p class="first">Architecture of the returned machine (e.g. &#8216;i386/generic&#8217;,
&#8216;amd64&#8217;, &#8216;armhf/highbank&#8217;, etc.).</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">type arch:</th><td class="field-body"><p class="first">unicode</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param cpu_count:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">The minium number of CPUs the returned machine must
have.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">type cpu_count:</th><td class="field-body"><p class="first">int</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param interfaces:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">A labeled constraint map associating constraint
labels with interface properties that should be matched. Returned
nodes must have one or more interface matching the specified
constraints. The labeled constraint map must be in the format:
<code class="docutils literal"><span class="pre">&lt;label&gt;:&lt;key&gt;=&lt;value&gt;[,&lt;key2&gt;=&lt;value2&gt;[,...]]</span></code></p>
<p>Each key can be one of the following:</p>
<ul class="simple">
<li>id: Matches an interface with the specific id</li>
<li>fabric: Matches an interface attached to the specified fabric.</li>
<li>fabric_class: Matches an interface attached to a fabric
with the specified class.</li>
<li>ip: Matches an interface with the specified IP address
assigned to it.</li>
<li>mode: Matches an interface with the specified mode. (Currently,
the only supported mode is &#8220;unconfigured&#8221;.)</li>
<li>name: Matches an interface with the specified name.
(For example, &#8220;eth0&#8221;.)</li>
<li>hostname: Matches an interface attached to the node with
the specified hostname.</li>
<li>subnet: Matches an interface attached to the specified subnet.</li>
<li>space: Matches an interface attached to the specified space.</li>
<li>subnet_cidr: Matches an interface attached to the specified
subnet CIDR. (For example, &#8220;192.168.0.0/24&#8221;.)</li>
<li>type: Matches an interface of the specified type. (Valid
types: &#8220;physical&#8221;, &#8220;vlan&#8221;, &#8220;bond&#8221;, &#8220;bridge&#8221;, or &#8220;unknown&#8221;.)</li>
<li>vlan: Matches an interface on the specified VLAN.</li>
<li>vid: Matches an interface on a VLAN with the specified VID.</li>
<li>tag: Matches an interface tagged with the specified tag.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type interfaces:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">unicode</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">param mem:</th><td class="field-body"><p class="first">The minimum amount of memory (expressed in MB) the
returned machine must have.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">type mem:</th><td class="field-body"><p class="first">float</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">param tags:</th><td class="field-body"><p class="first">List of tags the returned machine must have.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">type tags:</th><td class="field-body"><p class="first">list of unicodes</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">param not_tags:</th><td class="field-body"><p class="first">List of tags the acquired machine must not have.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">type tags:</th><td class="field-body"><p class="first">List of unicodes.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">param networks:</th><td class="field-body"><p class="first">List of networks (defined in MAAS) to which the
machine must be attached.  A network can be identified by the name
assigned to it in MAAS; or by an <cite>ip:</cite> prefix followed by any IP
address that falls within the network; or a <cite>vlan:</cite> prefix
followed by a numeric VLAN tag, e.g. <cite>vlan:23</cite> for VLAN number 23.
Valid VLAN tags must be in the range of 1 to 4094 inclusive.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">type networks:</th><td class="field-body"><p class="first">list of unicodes</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param not_networks:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">List of networks (defined in MAAS) to which the
machine must not be attached.  The returned machine won&#8217;t be
attached to any of the specified networks.  A network can be
identified by the name assigned to it in MAAS; or by an <cite>ip:</cite>
prefix followed by any IP address that falls within the network; or
a <cite>vlan:</cite> prefix followed by a numeric VLAN tag, e.g. <cite>vlan:23</cite> for
VLAN number 23. Valid VLAN tags must be in the range of 1 to 4094
inclusive.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type not_networks:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">list of unicodes</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">param zone:</th><td class="field-body"><p class="first">An optional name for a physical zone the acquired
machine should be located in.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">type zone:</th><td class="field-body"><p class="first">unicode</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">type not_in_zone:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">Optional list of physical zones from which the
machine should not be acquired.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type not_in_zone:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">List of unicodes.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param agent_name:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">An optional agent name to attach to the
acquired machine.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type agent_name:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">unicode</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">param comment:</th><td class="field-body"><p class="first">Optional comment for the event log.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">type comment:</th><td class="field-body"><p class="first">unicode</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param bridge_all:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">Optionally create a bridge interface for every
configured interface on the machine. The created bridges will be
removed once the machine is released.
(Default: False)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type bridge_all:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">boolean</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param bridge_stp:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">Optionally turn spanning tree protocol on or off
for the bridges created on every configured interface.
(Default: off)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type bridge_stp:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">boolean</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param bridge_fd:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">Optionally adjust the forward delay to time seconds.
(Default: 15)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">type bridge_fd:</th><td class="field-body"><p class="first">integer</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">param dry_run:</th><td class="field-body"><p class="first">Optional boolean to indicate that the machine should
not actually be acquired (this is for support/troubleshooting, or
users who want to see which machine would match a constraint,
without acquiring a machine). Defaults to False.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">type dry_run:</th><td class="field-body"><p class="first">bool</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">param verbose:</th><td class="field-body"><p class="first">Optional boolean to indicate that the user would like
additional verbosity in the constraints_by_type field (each
constraint will be prefixed by <cite>verbose_</cite>, and contain the full
data structure that indicates which machine(s) matched).</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">type verbose:</th><td class="field-body"><p class="first last">bool</p>
</td>
</tr>
</tbody>
</table>
<p class="last">Returns 409 if a suitable machine matching the constraints could not be
found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/machines/</span></code> <code class="docutils literal"><span class="pre">op=release</span></code></dt>
<dd><p class="first">Release multiple machines.</p>
<p>This places the machines back into the pool, ready to be reallocated.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param machines:</th><td class="field-body">system_ids of the machines which are to be released.
(An empty list is acceptable).</td>
</tr>
<tr class="field-even field"><th class="field-name">param comment:</th><td class="field-body">Optional comment for the event log.</td>
</tr>
<tr class="field-odd field"><th class="field-name">type comment:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-even field"><th class="field-name">return:</th><td class="field-body">The system_ids of any machines that have their status
changed by this call. Thus, machines that were already released
are excluded from the result.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 400 if any of the machines cannot be found.
Returns 403 if the user does not have permission to release any of
the machines.
Returns a 409 if any of the machines could not be released due to their
current state.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/machines/</span></code> <code class="docutils literal"><span class="pre">op=set_zone</span></code></dt>
<dd><p class="first">Assign multiple nodes to a physical zone at once.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param zone:</th><td class="field-body">Zone name.  If omitted, the zone is &#8220;none&#8221; and the nodes
will be taken out of their physical zones.</td>
</tr>
<tr class="field-even field"><th class="field-name">param nodes:</th><td class="field-body">system_ids of the nodes whose zones are to be set.
(An empty list is acceptable).</td>
</tr>
</tbody>
</table>
<p class="last">Raises 403 if the user is not an admin.</p>
</dd>
</dl>
</div>
<div class="section" id="network">
<h3>Network<a class="headerlink" href="api.html#network" title="Permalink to this headline">¶</a></h3>
<p>Manage a network.</p>
<blockquote>
<div>This endpoint is deprecated. Use the new &#8216;subnet&#8217; endpoint instead.</div></blockquote>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/networks/{name}/</span></code></dt>
<dd><p class="first">Delete network definition.</p>
<p class="last">This endpoint is no longer available. Use the &#8216;subnet&#8217; endpoint
instead.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/networks/{name}/</span></code></dt>
<dd>Read network definition.</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/networks/{name}/</span></code> <code class="docutils literal"><span class="pre">op=list_connected_macs</span></code></dt>
<dd><p class="first">Returns the list of MAC addresses connected to this network.</p>
<p class="last">Only MAC addresses for nodes visible to the requesting user are
returned.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/networks/{name}/</span></code> <code class="docutils literal"><span class="pre">op=connect_macs</span></code></dt>
<dd><p class="first">Connect the given MAC addresses to this network.</p>
<p class="last">This endpoint is no longer available. Use the &#8216;subnet&#8217; endpoint
instead.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/networks/{name}/</span></code> <code class="docutils literal"><span class="pre">op=disconnect_macs</span></code></dt>
<dd><p class="first">Disconnect the given MAC addresses from this network.</p>
<p class="last">This endpoint is no longer available. Use the &#8216;subnet&#8217; endpoint
instead.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/networks/{name}/</span></code></dt>
<dd><p class="first">Update network definition.</p>
<p>This endpoint is no longer available. Use the &#8216;subnet&#8217; endpoint
instead.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">A simple name for the network, to make it easier to
refer to.  Must consist only of letters, digits, dashes, and
underscores.</td>
</tr>
<tr class="field-even field"><th class="field-name">param ip:</th><td class="field-body">Base IP address for the network, e.g. <cite>10.1.0.0</cite>.  The host
bits will be zeroed.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param netmask:</th><td class="field-body">Subnet mask to indicate which parts of an IP address
are part of the network address.  For example, <cite>255.255.255.0</cite>.</td>
</tr>
<tr class="field-even field"><th class="field-name">param vlan_tag:</th><td class="field-body">Optional VLAN tag: a number between 1 and 0xffe (4094)
inclusive, or zero for an untagged network.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param description:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Detailed description of the network for the benefit
of users and administrators.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="networks">
<h3>Networks<a class="headerlink" href="api.html#networks" title="Permalink to this headline">¶</a></h3>
<p>Manage the networks.</p>
<blockquote>
<div>This endpoint is deprecated. Use the new &#8216;subnets&#8217; endpoint instead.</div></blockquote>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/networks/</span></code></dt>
<dd><p class="first">List networks.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param node:</th><td class="field-body">Optionally, nodes which must be attached to any returned
networks.  If more than one node is given, the result will be
restricted to networks that these nodes have in common.</td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/networks/</span></code></dt>
<dd><p class="first">Define a network.</p>
<p class="last">This endpoint is no longer available. Use the &#8216;subnets&#8217; endpoint
instead.</p>
</dd>
</dl>
</div>
<div class="section" id="node">
<h3>Node<a class="headerlink" href="api.html#node" title="Permalink to this headline">¶</a></h3>
<p>Manage an individual Node.</p>
<blockquote>
<div>The Node is identified by its system_id.</div></blockquote>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/nodes/{system_id}/</span></code></dt>
<dd><p class="first">Delete a specific Node.</p>
<p class="last">Returns 404 if the node is not found.
Returns 403 if the user does not have permission to delete the node.
Returns 204 if the node is successfully deleted.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/nodes/{system_id}/</span></code></dt>
<dd><p class="first">Read a specific Node.</p>
<p class="last">Returns 404 if the node is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/nodes/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=details</span></code></dt>
<dd><p class="first">Obtain various system details.</p>
<p>For example, LLDP and <code class="docutils literal"><span class="pre">lshw</span></code> XML dumps.</p>
<p>Returns a <code class="docutils literal"><span class="pre">{detail_type:</span> <span class="pre">xml,</span> <span class="pre">...}</span></code> map, where
<code class="docutils literal"><span class="pre">detail_type</span></code> is something like &#8220;lldp&#8221; or &#8220;lshw&#8221;.</p>
<p>Note that this is returned as BSON and not JSON. This is for
efficiency, but mainly because JSON can&#8217;t do binary content
without applying additional encoding like base-64.</p>
<p class="last">Returns 404 if the node is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/nodes/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=power_parameters</span></code></dt>
<dd><p class="first">Obtain power parameters.</p>
<p>This method is reserved for admin users and returns a 403 if the
user is not one.</p>
<p>This returns the power parameters, if any, configured for a
node. For some types of power control this will include private
information such as passwords and secret keys.</p>
<p class="last">Returns 404 if the node is not found.</p>
</dd>
</dl>
</div>
<div class="section" id="commissioning-results">
<h3>Commissioning results<a class="headerlink" href="api.html#commissioning-results" title="Permalink to this headline">¶</a></h3>
<p>Read the collection of NodeResult in the MAAS.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/installation-results/</span></code></dt>
<dd><p class="first">List NodeResult visible to the user, optionally filtered.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param system_id:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">An optional list of system ids.  Only the
results related to the nodes with these system ids
will be returned.</td>
</tr>
<tr class="field-even field"><th class="field-name">type system_id:</th><td class="field-body">iterable</td>
</tr>
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">An optional list of names.  Only the results
with the specified names will be returned.</td>
</tr>
<tr class="field-even field"><th class="field-name">type name:</th><td class="field-body">iterable</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param result_type:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">An optional result_type.  Only the results
with the specified result_type will be returned.</td>
</tr>
<tr class="field-even field"><th class="field-name">type name:</th><td class="field-body">iterable</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="nodes">
<h3>Nodes<a class="headerlink" href="api.html#nodes" title="Permalink to this headline">¶</a></h3>
<p>Manage the collection of all the nodes in the MAAS.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/nodes/</span></code></dt>
<dd><p class="first">List Nodes visible to the user, optionally filtered by criteria.</p>
<p>Nodes are sorted by id (i.e. most recent last) and grouped by type.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param hostname:</th><td class="field-body">An optional hostname. Only nodes relating to the node
with the matching hostname will be returned. This can be specified
multiple times to see multiple nodes.</td>
</tr>
<tr class="field-even field"><th class="field-name">type hostname:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param mac_address:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">An optional MAC address. Only nodes relating to the
node owning the specified MAC address will be returned. This can be
specified multiple times to see multiple nodes.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type mac_address:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param id:</th><td class="field-body">An optional list of system ids.  Only nodes relating to the
nodes with matching system ids will be returned.</td>
</tr>
<tr class="field-even field"><th class="field-name">type id:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param domain:</th><td class="field-body">An optional name for a dns domain. Only nodes relating
to the nodes in the domain will be returned.</td>
</tr>
<tr class="field-even field"><th class="field-name">type domain:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param zone:</th><td class="field-body">An optional name for a physical zone. Only nodes relating
to the nodes in the zone will be returned.</td>
</tr>
<tr class="field-even field"><th class="field-name">type zone:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param agent_name:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">An optional agent name.  Only nodes relating to the
nodes with matching agent names will be returned.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type agent_name:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/</span></code> <code class="docutils literal"><span class="pre">op=set_zone</span></code></dt>
<dd><p class="first">Assign multiple nodes to a physical zone at once.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param zone:</th><td class="field-body">Zone name.  If omitted, the zone is &#8220;none&#8221; and the nodes
will be taken out of their physical zones.</td>
</tr>
<tr class="field-even field"><th class="field-name">param nodes:</th><td class="field-body">system_ids of the nodes whose zones are to be set.
(An empty list is acceptable).</td>
</tr>
</tbody>
</table>
<p class="last">Raises 403 if the user is not an admin.</p>
</dd>
</dl>
</div>
<div class="section" id="package-repositories">
<h3>Package Repositories<a class="headerlink" href="api.html#package-repositories" title="Permalink to this headline">¶</a></h3>
<p>Manage the collection of all Package Repositories in MAAS.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/package-repositories/</span></code></dt>
<dd>List all Package Repositories.</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/package-repositories/</span></code></dt>
<dd><p class="first">Create a Package Repository.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">The name of the Package Repository.</td>
</tr>
<tr class="field-even field"><th class="field-name">type name:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param url:</th><td class="field-body">The url of the Package Repository.</td>
</tr>
<tr class="field-even field"><th class="field-name">type url:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param distributions:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Which package distributions to include.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type distributions:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param disabled_pockets:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The list of pockets to disable.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param components:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">The list of components to enable.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param arches:</th><td class="field-body">The list of supported architectures.</td>
</tr>
<tr class="field-even field"><th class="field-name">param key:</th><td class="field-body">The authentication key to use with the repository.</td>
</tr>
<tr class="field-odd field"><th class="field-name">type key:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-even field"><th class="field-name">param enabled:</th><td class="field-body">Whether or not the repository is enabled.</td>
</tr>
<tr class="field-odd field"><th class="field-name">type enabled:</th><td class="field-body">boolean</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="package-repository">
<h3>Package Repository<a class="headerlink" href="api.html#package-repository" title="Permalink to this headline">¶</a></h3>
<p>Manage an individual Package Repository.</p>
<blockquote>
<div>The Package Repository is identified by its id.</div></blockquote>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/package-repositories/{package_repository_id}/</span></code></dt>
<dd><p class="first">Delete a Package Repository.</p>
<p class="last">Returns 404 if the Package Repository is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/package-repositories/{package_repository_id}/</span></code></dt>
<dd><p class="first">Read Package Repository.</p>
<p class="last">Returns 404 if the repository is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/package-repositories/{package_repository_id}/</span></code></dt>
<dd><p class="first">Update a Package Repository.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">The name of the Package Repository.</td>
</tr>
<tr class="field-even field"><th class="field-name">type name:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param url:</th><td class="field-body">The url of the Package Repository.</td>
</tr>
<tr class="field-even field"><th class="field-name">type url:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param distributions:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Which package distributions to include.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type distributions:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param disabled_pockets:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The list of pockets to disable.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param components:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">The list of components to enable.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param arches:</th><td class="field-body">The list of supported architectures.</td>
</tr>
<tr class="field-even field"><th class="field-name">param key:</th><td class="field-body">The authentication key to use with the repository.</td>
</tr>
<tr class="field-odd field"><th class="field-name">type key:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-even field"><th class="field-name">param enabled:</th><td class="field-body">Whether or not the repository is enabled.</td>
</tr>
<tr class="field-odd field"><th class="field-name">type enabled:</th><td class="field-body">boolean</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the Package Repository is not found.</p>
</dd>
</dl>
</div>
<div class="section" id="partitions">
<h3>Partitions<a class="headerlink" href="api.html#partitions" title="Permalink to this headline">¶</a></h3>
<p>Manage partition on a block device.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/nodes/{system_id}/blockdevices/{device_id}/partition/{partition_id}</span></code></dt>
<dd><p class="first">Delete partition.</p>
<p class="last">Returns 404 if the node, block device, or partition are not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/nodes/{system_id}/blockdevices/{device_id}/partition/{partition_id}</span></code></dt>
<dd><p class="first">Read partition.</p>
<p class="last">Returns 404 if the node, block device, or partition are not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/{system_id}/blockdevices/{device_id}/partition/{partition_id}</span></code> <code class="docutils literal"><span class="pre">op=format</span></code></dt>
<dd><p class="first">Format a partition.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param fstype:</th><td class="field-body">Type of filesystem.</td>
</tr>
<tr class="field-even field"><th class="field-name">param uuid:</th><td class="field-body">The UUID for the filesystem.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param label:</th><td class="field-body">The label for the filesystem.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 403 when the user doesn&#8217;t have the ability to format the             partition.
Returns 404 if the node, block device, or partition is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/{system_id}/blockdevices/{device_id}/partition/{partition_id}</span></code> <code class="docutils literal"><span class="pre">op=mount</span></code></dt>
<dd><p class="first">Mount the filesystem on partition.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param mount_point:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Path on the filesystem to mount.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param mount_options:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Options to pass to mount(8).</td>
</tr>
</tbody>
</table>
<p class="last">Returns 403 when the user doesn&#8217;t have the ability to mount the             partition.
Returns 404 if the node, block device, or partition is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/{system_id}/blockdevices/{device_id}/partition/{partition_id}</span></code> <code class="docutils literal"><span class="pre">op=unformat</span></code></dt>
<dd>Unformat a partition.</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/{system_id}/blockdevices/{device_id}/partition/{partition_id}</span></code> <code class="docutils literal"><span class="pre">op=unmount</span></code></dt>
<dd><p class="first">Unmount the filesystem on partition.</p>
<p class="last">Returns 400 if the partition is not formatted or not currently             mounted.
Returns 403 when the user doesn&#8217;t have the ability to unmount the             partition.
Returns 404 if the node, block device, or partition is not found.</p>
</dd>
</dl>
</div>
<div class="section" id="id1">
<h3>Partitions<a class="headerlink" href="api.html#id1" title="Permalink to this headline">¶</a></h3>
<p>Manage partitions on a block device.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/nodes/{system_id}/blockdevices/{device_id}/partitions/</span></code></dt>
<dd><p class="first">List all partitions on the block device.</p>
<p class="last">Returns 404 if the node or the block device are not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/{system_id}/blockdevices/{device_id}/partitions/</span></code></dt>
<dd><p class="first">Create a partition on the block device.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param size:</th><td class="field-body">The size of the partition.</td>
</tr>
<tr class="field-even field"><th class="field-name">param uuid:</th><td class="field-body">UUID for the partition. Only used if the partition table
type for the block device is GPT.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param bootable:</th><td class="field-body">If the partition should be marked bootable.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the node or the block device are not found.</p>
</dd>
</dl>
</div>
<div class="section" id="rackcontroller">
<h3>RackController<a class="headerlink" href="api.html#rackcontroller" title="Permalink to this headline">¶</a></h3>
<p>Manage an individual rack controller.</p>
<blockquote>
<div>The rack controller is identified by its system_id.</div></blockquote>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/rackcontrollers/{system_id}/</span></code></dt>
<dd><p class="first">Delete a specific Node.</p>
<p class="last">Returns 404 if the node is not found.
Returns 403 if the user does not have permission to delete the node.
Returns 204 if the node is successfully deleted.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/rackcontrollers/{system_id}/</span></code></dt>
<dd><p class="first">Read a specific Node.</p>
<p class="last">Returns 404 if the node is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/rackcontrollers/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=details</span></code></dt>
<dd><p class="first">Obtain various system details.</p>
<p>For example, LLDP and <code class="docutils literal"><span class="pre">lshw</span></code> XML dumps.</p>
<p>Returns a <code class="docutils literal"><span class="pre">{detail_type:</span> <span class="pre">xml,</span> <span class="pre">...}</span></code> map, where
<code class="docutils literal"><span class="pre">detail_type</span></code> is something like &#8220;lldp&#8221; or &#8220;lshw&#8221;.</p>
<p>Note that this is returned as BSON and not JSON. This is for
efficiency, but mainly because JSON can&#8217;t do binary content
without applying additional encoding like base-64.</p>
<p class="last">Returns 404 if the node is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/rackcontrollers/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=list_boot_images</span></code></dt>
<dd><p class="first">List all available boot images.</p>
<p>Shows all available boot images and lists whether they are in sync with
the region.</p>
<p class="last">Returns 404 if the rack controller is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/rackcontrollers/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=power_parameters</span></code></dt>
<dd><p class="first">Obtain power parameters.</p>
<p>This method is reserved for admin users and returns a 403 if the
user is not one.</p>
<p>This returns the power parameters, if any, configured for a
node. For some types of power control this will include private
information such as passwords and secret keys.</p>
<p class="last">Returns 404 if the node is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/rackcontrollers/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=query_power_state</span></code></dt>
<dd><p class="first">Query the power state of a node.</p>
<p>Send a request to the node&#8217;s power controller which asks it about
the node&#8217;s state.  The reply to this could be delayed by up to
30 seconds while waiting for the power controller to respond.
Use this method sparingly as it ties up an appserver thread
while waiting.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param system_id:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The node to query.</td>
</tr>
<tr class="field-even field"><th class="field-name">return:</th><td class="field-body">a dict whose key is &#8220;state&#8221; with a value of one of
&#8216;on&#8217; or &#8216;off&#8217;.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the node is not found.
Returns node&#8217;s power state.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/rackcontrollers/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=import_boot_images</span></code></dt>
<dd><p class="first">Import the boot images on this rack controller.</p>
<p class="last">Returns 404 if the rack controller is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/rackcontrollers/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=power_off</span></code></dt>
<dd><p class="first">Power off a node.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param stop_mode:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">An optional power off mode. If &#8216;soft&#8217;,
perform a soft power down if the node&#8217;s power type supports
it, otherwise perform a hard power off. For all values other
than &#8216;soft&#8217;, and by default, perform a hard power off. A
soft power off generally asks the OS to shutdown the system
gracefully before powering off, while a hard power off
occurs immediately without any warning to the OS.</td>
</tr>
<tr class="field-even field"><th class="field-name">type stop_mode:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param comment:</th><td class="field-body">Optional comment for the event log.</td>
</tr>
<tr class="field-even field"><th class="field-name">type comment:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the node is not found.
Returns 403 if the user does not have permission to stop the node.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/rackcontrollers/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=power_on</span></code></dt>
<dd><p class="first">Turn on a node.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param user_data:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">If present, this blob of user-data to be made
available to the nodes through the metadata service.</td>
</tr>
<tr class="field-even field"><th class="field-name">type user_data:</th><td class="field-body">base64-encoded unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param comment:</th><td class="field-body">Optional comment for the event log.</td>
</tr>
<tr class="field-even field"><th class="field-name">type comment:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>Ideally we&#8217;d have MIME multipart and content-transfer-encoding etc.
deal with the encapsulation of binary data, but couldn&#8217;t make it work
with the framework in reasonable time so went for a dumb, manual
encoding instead.</p>
<p class="last">Returns 404 if the node is not found.
Returns 403 if the user does not have permission to start the machine.
Returns 503 if the start-up attempted to allocate an IP address,
and there were no IP addresses available on the relevant cluster
interface.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/rackcontrollers/{system_id}/</span></code></dt>
<dd><p class="first">Update a specific Rack controller.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param power_type:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The new power type for this rack controller. If you
use the default value, power_parameters will be set to the empty
string.
Available to admin users.
See the <a class="reference internal" href="api.html#power-types">Power types</a> section for a list of the available power
types.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type power_type:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param power_parameters_{param1}:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The new value for the &#8216;param1&#8217;
power parameter.  Note that this is dynamic as the available
parameters depend on the selected value of the rack controller&#8217;s
power_type.  Available to admin users. See the <a class="reference internal" href="api.html#power-types">Power types</a>
section for a list of the available power parameters for each
power type.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type power_parameters_{param1}:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param power_parameters_skip_check:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Whether or not the new power
parameters for this rack controller should be checked against the
expected power parameters for the rack controller&#8217;s power type
(&#8216;true&#8217; or &#8216;false&#8217;). The default is &#8216;false&#8217;.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type power_parameters_skip_check:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param zone:</th><td class="field-body">Name of a valid physical zone in which to place this
rack controller.</td>
</tr>
<tr class="field-even field"><th class="field-name">type zone:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the rack controller is not found.
Returns 403 if the user does not have permission to update the rack
controller.</p>
</dd>
</dl>
</div>
<div class="section" id="rackcontrollers">
<h3>RackControllers<a class="headerlink" href="api.html#rackcontrollers" title="Permalink to this headline">¶</a></h3>
<p>Manage the collection of all rack controllers in MAAS.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/rackcontrollers/</span></code></dt>
<dd><p class="first">List Nodes visible to the user, optionally filtered by criteria.</p>
<p>Nodes are sorted by id (i.e. most recent last) and grouped by type.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param hostname:</th><td class="field-body">An optional hostname. Only nodes relating to the node
with the matching hostname will be returned. This can be specified
multiple times to see multiple nodes.</td>
</tr>
<tr class="field-even field"><th class="field-name">type hostname:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param mac_address:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">An optional MAC address. Only nodes relating to the
node owning the specified MAC address will be returned. This can be
specified multiple times to see multiple nodes.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type mac_address:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param id:</th><td class="field-body">An optional list of system ids.  Only nodes relating to the
nodes with matching system ids will be returned.</td>
</tr>
<tr class="field-even field"><th class="field-name">type id:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param domain:</th><td class="field-body">An optional name for a dns domain. Only nodes relating
to the nodes in the domain will be returned.</td>
</tr>
<tr class="field-even field"><th class="field-name">type domain:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param zone:</th><td class="field-body">An optional name for a physical zone. Only nodes relating
to the nodes in the zone will be returned.</td>
</tr>
<tr class="field-even field"><th class="field-name">type zone:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param agent_name:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">An optional agent name.  Only nodes relating to the
nodes with matching agent names will be returned.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type agent_name:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/rackcontrollers/</span></code> <code class="docutils literal"><span class="pre">op=describe_power_types</span></code></dt>
<dd><p class="first">Query all of the rack controllers for power information.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">return:</th><td class="field-body">a list of dicts that describe the power types in this format.</td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/rackcontrollers/</span></code> <code class="docutils literal"><span class="pre">op=power_parameters</span></code></dt>
<dd><p class="first">Retrieve power parameters for multiple machines.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param id:</th><td class="field-body">An optional list of system ids.  Only machines with
matching system ids will be returned.</td>
</tr>
<tr class="field-even field"><th class="field-name">type id:</th><td class="field-body">iterable</td>
</tr>
<tr class="field-odd field"><th class="field-name">return:</th><td class="field-body">A dictionary of power parameters, keyed by machine system_id.</td>
</tr>
</tbody>
</table>
<p class="last">Raises 403 if the user is not an admin.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/rackcontrollers/</span></code> <code class="docutils literal"><span class="pre">op=import_boot_images</span></code></dt>
<dd>Import the boot images on all rack controllers.</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/rackcontrollers/</span></code> <code class="docutils literal"><span class="pre">op=set_zone</span></code></dt>
<dd><p class="first">Assign multiple nodes to a physical zone at once.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param zone:</th><td class="field-body">Zone name.  If omitted, the zone is &#8220;none&#8221; and the nodes
will be taken out of their physical zones.</td>
</tr>
<tr class="field-even field"><th class="field-name">param nodes:</th><td class="field-body">system_ids of the nodes whose zones are to be set.
(An empty list is acceptable).</td>
</tr>
</tbody>
</table>
<p class="last">Raises 403 if the user is not an admin.</p>
</dd>
</dl>
</div>
<div class="section" id="raid-device">
<h3>RAID Device<a class="headerlink" href="api.html#raid-device" title="Permalink to this headline">¶</a></h3>
<p>Manage a specific RAID device on a machine.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/nodes/{system_id}/raid/{raid_id}/</span></code></dt>
<dd><p class="first">Delete RAID on a machine.</p>
<p class="last">Returns 404 if the machine or RAID is not found.
Returns 409 if the machine is not Ready.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/nodes/{system_id}/raid/{raid_id}/</span></code></dt>
<dd><p class="first">Read RAID device on a machine.</p>
<p class="last">Returns 404 if the machine or RAID is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/nodes/{system_id}/raid/{raid_id}/</span></code></dt>
<dd><p class="first">Update RAID on a machine.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the RAID.</td>
</tr>
<tr class="field-even field"><th class="field-name">param uuid:</th><td class="field-body">UUID of the RAID.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param add_block_devices:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Block devices to add to the RAID.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param remove_block_devices:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Block devices to remove from the RAID.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param add_spare_devices:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Spare block devices to add to the RAID.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param remove_spare_devices:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Spare block devices to remove
from the RAID.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param add_partitions:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Partitions to add to the RAID.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param remove_partitions:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Partitions to remove from the RAID.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param add_spare_partitions:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Spare partitions to add to the RAID.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param remove_spare_partitions:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Spare partitions to remove from the
RAID.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the machine or RAID is not found.
Returns 409 if the machine is not Ready.</p>
</dd>
</dl>
</div>
<div class="section" id="raid-devices">
<h3>RAID Devices<a class="headerlink" href="api.html#raid-devices" title="Permalink to this headline">¶</a></h3>
<p>Manage all RAID devices on a machine.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/nodes/{system_id}/raids/</span></code></dt>
<dd><p class="first">List all RAID devices belonging to a machine.</p>
<p class="last">Returns 404 if the machine is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/{system_id}/raids/</span></code></dt>
<dd><p class="first">Creates a RAID</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the RAID.</td>
</tr>
<tr class="field-even field"><th class="field-name">param uuid:</th><td class="field-body">UUID of the RAID.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param level:</th><td class="field-body">RAID level.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param block_devices:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Block devices to add to the RAID.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param spare_devices:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Spare block devices to add to the RAID.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param partitions:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Partitions to add to the RAID.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param spare_partitions:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Spare partitions to add to the RAID.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the machine is not found.
Returns 409 if the machine is not Ready.</p>
</dd>
</dl>
</div>
<div class="section" id="regioncontroller">
<h3>RegionController<a class="headerlink" href="api.html#regioncontroller" title="Permalink to this headline">¶</a></h3>
<p>Manage an individual region controller.</p>
<blockquote>
<div>The region controller is identified by its system_id.</div></blockquote>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/regioncontrollers/{system_id}/</span></code></dt>
<dd><p class="first">Delete a specific Node.</p>
<p class="last">Returns 404 if the node is not found.
Returns 403 if the user does not have permission to delete the node.
Returns 204 if the node is successfully deleted.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/regioncontrollers/{system_id}/</span></code></dt>
<dd><p class="first">Read a specific Node.</p>
<p class="last">Returns 404 if the node is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/regioncontrollers/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=details</span></code></dt>
<dd><p class="first">Obtain various system details.</p>
<p>For example, LLDP and <code class="docutils literal"><span class="pre">lshw</span></code> XML dumps.</p>
<p>Returns a <code class="docutils literal"><span class="pre">{detail_type:</span> <span class="pre">xml,</span> <span class="pre">...}</span></code> map, where
<code class="docutils literal"><span class="pre">detail_type</span></code> is something like &#8220;lldp&#8221; or &#8220;lshw&#8221;.</p>
<p>Note that this is returned as BSON and not JSON. This is for
efficiency, but mainly because JSON can&#8217;t do binary content
without applying additional encoding like base-64.</p>
<p class="last">Returns 404 if the node is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/regioncontrollers/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=power_parameters</span></code></dt>
<dd><p class="first">Obtain power parameters.</p>
<p>This method is reserved for admin users and returns a 403 if the
user is not one.</p>
<p>This returns the power parameters, if any, configured for a
node. For some types of power control this will include private
information such as passwords and secret keys.</p>
<p class="last">Returns 404 if the node is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/regioncontrollers/{system_id}/</span></code></dt>
<dd><p class="first">Update a specific Region controller.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param power_type:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The new power type for this region controller. If
you use the default value, power_parameters will be set to the
empty string.
Available to admin users.
See the <a class="reference internal" href="api.html#power-types">Power types</a> section for a list of the available power
types.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type power_type:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param power_parameters_{param1}:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The new value for the &#8216;param1&#8217;
power parameter.  Note that this is dynamic as the available
parameters depend on the selected value of the region controller&#8217;s
power_type.  Available to admin users. See the <a class="reference internal" href="api.html#power-types">Power types</a>
section for a list of the available power parameters for each
power type.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type power_parameters_{param1}:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param power_parameters_skip_check:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Whether or not the new power
parameters for this region controller should be checked against the
expected power parameters for the region controller&#8217;s power type
(&#8216;true&#8217; or &#8216;false&#8217;).
The default is &#8216;false&#8217;.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type power_parameters_skip_check:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param zone:</th><td class="field-body">Name of a valid physical zone in which to place this
region controller.</td>
</tr>
<tr class="field-even field"><th class="field-name">type zone:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the region controller is not found.
Returns 403 if the user does not have permission to update the region
controller.</p>
</dd>
</dl>
</div>
<div class="section" id="regioncontrollers">
<h3>RegionControllers<a class="headerlink" href="api.html#regioncontrollers" title="Permalink to this headline">¶</a></h3>
<p>Manage the collection of all region controllers in MAAS.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/regioncontrollers/</span></code></dt>
<dd><p class="first">List Nodes visible to the user, optionally filtered by criteria.</p>
<p>Nodes are sorted by id (i.e. most recent last) and grouped by type.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param hostname:</th><td class="field-body">An optional hostname. Only nodes relating to the node
with the matching hostname will be returned. This can be specified
multiple times to see multiple nodes.</td>
</tr>
<tr class="field-even field"><th class="field-name">type hostname:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param mac_address:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">An optional MAC address. Only nodes relating to the
node owning the specified MAC address will be returned. This can be
specified multiple times to see multiple nodes.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type mac_address:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param id:</th><td class="field-body">An optional list of system ids.  Only nodes relating to the
nodes with matching system ids will be returned.</td>
</tr>
<tr class="field-even field"><th class="field-name">type id:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param domain:</th><td class="field-body">An optional name for a dns domain. Only nodes relating
to the nodes in the domain will be returned.</td>
</tr>
<tr class="field-even field"><th class="field-name">type domain:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param zone:</th><td class="field-body">An optional name for a physical zone. Only nodes relating
to the nodes in the zone will be returned.</td>
</tr>
<tr class="field-even field"><th class="field-name">type zone:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param agent_name:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">An optional agent name.  Only nodes relating to the
nodes with matching agent names will be returned.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type agent_name:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/regioncontrollers/</span></code> <code class="docutils literal"><span class="pre">op=set_zone</span></code></dt>
<dd><p class="first">Assign multiple nodes to a physical zone at once.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param zone:</th><td class="field-body">Zone name.  If omitted, the zone is &#8220;none&#8221; and the nodes
will be taken out of their physical zones.</td>
</tr>
<tr class="field-even field"><th class="field-name">param nodes:</th><td class="field-body">system_ids of the nodes whose zones are to be set.
(An empty list is acceptable).</td>
</tr>
</tbody>
</table>
<p class="last">Raises 403 if the user is not an admin.</p>
</dd>
</dl>
</div>
<div class="section" id="ssh-key">
<h3>SSH Key<a class="headerlink" href="api.html#ssh-key" title="Permalink to this headline">¶</a></h3>
<p>Manage an SSH key.</p>
<blockquote>
<div>SSH keys can be retrieved or deleted.</div></blockquote>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/account/prefs/sshkeys/{keyid}/</span></code></dt>
<dd><p class="first">DELETE an SSH key.</p>
<p class="last">Returns 404 if the key does not exist.
Returns 401 if the key does not belong to the calling user.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/account/prefs/sshkeys/{keyid}/</span></code></dt>
<dd><p class="first">GET an SSH key.</p>
<p class="last">Returns 404 if the key does not exist.</p>
</dd>
</dl>
</div>
<div class="section" id="ssh-keys">
<h3>SSH Keys<a class="headerlink" href="api.html#ssh-keys" title="Permalink to this headline">¶</a></h3>
<p>Manage the collection of all the SSH keys in this MAAS.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/account/prefs/sshkeys/</span></code></dt>
<dd>List all keys belonging to the requesting user.</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/account/prefs/sshkeys/</span></code></dt>
<dd><p class="first">Add a new SSH key to the requesting user&#8217;s account.</p>
<p class="last">The request payload should contain the public SSH key data in form
data whose name is &#8220;key&#8221;.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/account/prefs/sshkeys/</span></code> <code class="docutils literal"><span class="pre">op=import</span></code></dt>
<dd><p class="first">Import the requesting user&#8217;s SSH keys.</p>
<p class="last">Import SSH keys for a given protocol and authorization ID in
protocol:auth_id format.</p>
</dd>
</dl>
</div>
<div class="section" id="ssl-key">
<h3>SSL Key<a class="headerlink" href="api.html#ssl-key" title="Permalink to this headline">¶</a></h3>
<p>Manage an SSL key.</p>
<blockquote>
<div>SSL keys can be retrieved or deleted.</div></blockquote>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/account/prefs/sslkeys/{keyid}/</span></code></dt>
<dd><p class="first">DELETE an SSL key.</p>
<p class="last">Returns 401 if the key does not belong to the requesting user.
Returns 204 if the key is successfully deleted.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/account/prefs/sslkeys/{keyid}/</span></code></dt>
<dd><p class="first">GET an SSL key.</p>
<p class="last">Returns 404 if the keyid is not found.
Returns 401 if the key does not belong to the requesting user.</p>
</dd>
</dl>
</div>
<div class="section" id="ssl-keys">
<h3>SSL Keys<a class="headerlink" href="api.html#ssl-keys" title="Permalink to this headline">¶</a></h3>
<p>Operations on multiple keys.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/account/prefs/sslkeys/</span></code></dt>
<dd>List all keys belonging to the requesting user.</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/account/prefs/sslkeys/</span></code></dt>
<dd><p class="first">Add a new SSL key to the requesting user&#8217;s account.</p>
<p class="last">The request payload should contain the SSL key data in form
data whose name is &#8220;key&#8221;.</p>
</dd>
</dl>
</div>
<div class="section" id="space">
<h3>Space<a class="headerlink" href="api.html#space" title="Permalink to this headline">¶</a></h3>
<p>Manage space.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/spaces/{space_id}/</span></code></dt>
<dd><p class="first">Delete space.</p>
<p class="last">Returns 404 if the space is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/spaces/{space_id}/</span></code></dt>
<dd><p class="first">Read space.</p>
<p class="last">Returns 404 if the space is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/spaces/{space_id}/</span></code></dt>
<dd><p class="first">Update space.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the space.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param description:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Description of the space.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the space is not found.</p>
</dd>
</dl>
</div>
<div class="section" id="spaces">
<h3>Spaces<a class="headerlink" href="api.html#spaces" title="Permalink to this headline">¶</a></h3>
<p>Manage spaces.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/spaces/</span></code></dt>
<dd>List all spaces.</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/spaces/</span></code></dt>
<dd><p class="first">Create a space.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the space.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param description:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Description of the space.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="static-route">
<h3>Static route<a class="headerlink" href="api.html#static-route" title="Permalink to this headline">¶</a></h3>
<p>Manage static route.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/static-routes/{staticroute_id}/</span></code></dt>
<dd><p class="first">Delete static route.</p>
<p class="last">Returns 404 if the static route is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/static-routes/{staticroute_id}/</span></code></dt>
<dd><p class="first">Read static route.</p>
<p class="last">Returns 404 if the static route is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/static-routes/{staticroute_id}/</span></code></dt>
<dd><p class="first">Update static route.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param source:</th><td class="field-body">Source subnet for the route.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param destination:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Destination subnet for the route.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param gateway_ip:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">IP address of the gateway on the source subnet.</td>
</tr>
<tr class="field-even field"><th class="field-name">param metric:</th><td class="field-body">Weight of the route on a deployed machine.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the static route is not found.</p>
</dd>
</dl>
</div>
<div class="section" id="static-routes">
<h3>Static routes<a class="headerlink" href="api.html#static-routes" title="Permalink to this headline">¶</a></h3>
<p>Manage static routes.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/static-routes/</span></code></dt>
<dd>List all static routes.</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/static-routes/</span></code></dt>
<dd><p class="first">Create a static route.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param source:</th><td class="field-body">Source subnet for the route.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param destination:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Destination subnet for the route.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param gateway_ip:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">IP address of the gateway on the source subnet.</td>
</tr>
<tr class="field-even field"><th class="field-name">param metric:</th><td class="field-body">Weight of the route on a deployed machine.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="subnet">
<h3>Subnet<a class="headerlink" href="api.html#subnet" title="Permalink to this headline">¶</a></h3>
<p>Manage subnet.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/subnets/{subnet_id}/</span></code></dt>
<dd><p class="first">Delete subnet.</p>
<p class="last">Returns 404 if the subnet is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/subnets/{subnet_id}/</span></code></dt>
<dd><p class="first">Read subnet.</p>
<p class="last">Returns 404 if the subnet is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/subnets/{subnet_id}/</span></code> <code class="docutils literal"><span class="pre">op=ip_addresses</span></code></dt>
<dd><p class="first">Returns a summary of IP addresses assigned to this subnet.</p>
<p class="last">Optional arguments:
with_username: (default=True) if False, suppresses the display
of usernames associated with each address.
with_node_summary: (default=True) if False, suppresses the display
of any node associated with each address.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/subnets/{subnet_id}/</span></code> <code class="docutils literal"><span class="pre">op=reserved_ip_ranges</span></code></dt>
<dd><p class="first">Lists IP ranges currently reserved in the subnet.</p>
<p class="last">Returns 404 if the subnet is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/subnets/{subnet_id}/</span></code> <code class="docutils literal"><span class="pre">op=statistics</span></code></dt>
<dd><p class="first">Returns statistics for the specified subnet, including:</p>
<p>num_available - the number of available IP addresses
largest_available - the largest number of contiguous free IP addresses
num_unavailable - the number of unavailable IP addresses
total_addresses - the sum of the available plus unavailable addresses
usage - the (floating point) usage percentage of this subnet
usage_string - the (formatted unicode) usage percentage of this subnet
ranges - the specific IP ranges present in ths subnet (if specified)</p>
<p>Optional arguments:
include_ranges: if True, includes detailed information
about the usage of this range.
include_suggestions: if True, includes the suggested gateway and
dynamic range for this subnet, if it were to be configured.</p>
<p class="last">Returns 404 if the subnet is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/subnets/{subnet_id}/</span></code> <code class="docutils literal"><span class="pre">op=unreserved_ip_ranges</span></code></dt>
<dd><p class="first">Lists IP ranges currently unreserved in the subnet.</p>
<p class="last">Returns 404 if the subnet is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/subnets/{subnet_id}/</span></code></dt>
<dd><p class="first">Update subnet.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the subnet.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param description:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Description of the subnet.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param vlan:</th><td class="field-body">VLAN this subnet belongs to.</td>
</tr>
<tr class="field-even field"><th class="field-name">param space:</th><td class="field-body">Space this subnet is in.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param cidr:</th><td class="field-body">The network CIDR for this subnet.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param gateway_ip:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">The gateway IP address for this subnet.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param rdns_mode:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">How reverse DNS is handled for this subnet.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param allow_proxy:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Configure maas-proxy to allow requests from this             subnet.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param dns_servers:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Comma-seperated list of DNS servers for this             subnet.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the subnet is not found.</p>
</dd>
</dl>
</div>
<div class="section" id="subnets">
<h3>Subnets<a class="headerlink" href="api.html#subnets" title="Permalink to this headline">¶</a></h3>
<p>Manage subnets.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/subnets/</span></code></dt>
<dd>List all subnets.</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/subnets/</span></code></dt>
<dd><p class="first">Create a subnet.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the subnet.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param description:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Description of the subnet.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param fabric:</th><td class="field-body">Fabric for the subnet. Defaults to the fabric the
provided VLAN belongs to or defaults to the default fabric.</td>
</tr>
<tr class="field-even field"><th class="field-name">param vlan:</th><td class="field-body">VLAN this subnet belongs to. Defaults to the default
VLAN for the provided fabric or defaults to the default VLAN in
the default fabric.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param vid:</th><td class="field-body">VID of the VLAN this subnet belongs to. Only used when
vlan is not provided. Picks the VLAN with this VID in the provided
fabric or the default fabric if one is not given.</td>
</tr>
<tr class="field-even field"><th class="field-name">param space:</th><td class="field-body">Space this subnet is in. Defaults to the default space.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param cidr:</th><td class="field-body">The network CIDR for this subnet.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param gateway_ip:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">The gateway IP address for this subnet.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param rdns_mode:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">How reverse DNS is handled for this subnet.
One of: 0 (Disabled), 1 (Enabled), or 2 (RFC2317).  Disabled means
no reverse zone is created; Enabled means generate the reverse
zone; RFC2317 extends Enabled to create the necessary parent zone
with the appropriate CNAME resource records for the network, if the
network is small enough to require the support described in
RFC2317.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param allow_proxy:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Configure maas-proxy to allow requests from this
subnet.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param dns_servers:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Comma-seperated list of DNS servers for this
subnet.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="tag">
<h3>Tag<a class="headerlink" href="api.html#tag" title="Permalink to this headline">¶</a></h3>
<p>Manage a Tag.</p>
<blockquote>
<div><p>Tags are properties that can be associated with a Node and serve as
criteria for selecting and allocating nodes.</p>
<p>A Tag is identified by its name.</p>
</div></blockquote>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/tags/{name}/</span></code></dt>
<dd><p class="first">Delete a specific Tag.</p>
<p class="last">Returns 404 if the tag is not found.
Returns 204 if the tag is successfully deleted.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/tags/{name}/</span></code></dt>
<dd><p class="first">Read a specific Tag.</p>
<p class="last">Returns 404 if the tag is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/tags/{name}/</span></code> <code class="docutils literal"><span class="pre">op=devices</span></code></dt>
<dd><p class="first">Get the list of devices that have this tag.</p>
<p class="last">Returns 404 if the tag is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/tags/{name}/</span></code> <code class="docutils literal"><span class="pre">op=machines</span></code></dt>
<dd><p class="first">Get the list of machines that have this tag.</p>
<p class="last">Returns 404 if the tag is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/tags/{name}/</span></code> <code class="docutils literal"><span class="pre">op=nodes</span></code></dt>
<dd><p class="first">Get the list of nodes that have this tag.</p>
<p class="last">Returns 404 if the tag is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/tags/{name}/</span></code> <code class="docutils literal"><span class="pre">op=rack_controllers</span></code></dt>
<dd><p class="first">Get the list of rack controllers that have this tag.</p>
<p class="last">Returns 404 if the tag is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/tags/{name}/</span></code> <code class="docutils literal"><span class="pre">op=region_controllers</span></code></dt>
<dd><p class="first">Get the list of region controllers that have this tag.</p>
<p class="last">Returns 404 if the tag is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/tags/{name}/</span></code> <code class="docutils literal"><span class="pre">op=rebuild</span></code></dt>
<dd><p class="first">Manually trigger a rebuild the tag &lt;=&gt; node mapping.</p>
<p>This is considered a maintenance operation, which should normally not
be necessary. Adding nodes or updating a tag&#8217;s definition should
automatically trigger the appropriate changes.</p>
<p class="last">Returns 404 if the tag is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/tags/{name}/</span></code> <code class="docutils literal"><span class="pre">op=update_nodes</span></code></dt>
<dd><p class="first">Add or remove nodes being associated with this tag.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param add:</th><td class="field-body">system_ids of nodes to add to this tag.</td>
</tr>
<tr class="field-even field"><th class="field-name">param remove:</th><td class="field-body">system_ids of nodes to remove from this tag.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param definition:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">(optional) If supplied, the definition will be
validated against the current definition of the tag. If the value
does not match, then the update will be dropped (assuming this was
just a case of a worker being out-of-date)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param rack_controller:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">A system ID of a rack controller that did the
processing. This value is optional. If not supplied, the requester
must be a superuser. If supplied, then the requester must be the
rack controller.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the tag is not found.
Returns 401 if the user does not have permission to update the nodes.
Returns 409 if &#8216;definition&#8217; doesn&#8217;t match the current definition.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/tags/{name}/</span></code></dt>
<dd><p class="first">Update a specific Tag.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">The name of the Tag to be created. This should be a short
name, and will be used in the URL of the tag.</td>
</tr>
<tr class="field-even field"><th class="field-name">param comment:</th><td class="field-body">A long form description of what the tag is meant for.
It is meant as a human readable description of the tag.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param definition:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">An XPATH query that will be evaluated against the
hardware_details stored for all nodes (output of <cite>lshw -xml</cite>).</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the tag is not found.</p>
</dd>
</dl>
</div>
<div class="section" id="tags">
<h3>Tags<a class="headerlink" href="api.html#tags" title="Permalink to this headline">¶</a></h3>
<p>Manage the collection of all the Tags in this MAAS.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/tags/</span></code></dt>
<dd><p class="first">List Tags.</p>
<p class="last">Get a listing of all tags that are currently defined.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/tags/</span></code></dt>
<dd><p class="first">Create a new Tag.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">The name of the Tag to be created. This should be a short
name, and will be used in the URL of the tag.</td>
</tr>
<tr class="field-even field"><th class="field-name">param comment:</th><td class="field-body">A long form description of what the tag is meant for.
It is meant as a human readable description of the tag.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param definition:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">An XPATH query that will be evaluated against the
hardware_details stored for all nodes (output of <cite>lshw -xml</cite>).</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param kernel_opts:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Can be None. If set, nodes associated with this tag
will add this string to their kernel options when booting. The
value overrides the global &#8216;kernel_opts&#8217; setting. If more than one
tag is associated with a node, the one with the lowest alphabetical
name will be picked (eg 01-my-tag will be taken over 99-tag-name).</td>
</tr>
</tbody>
</table>
<p class="last">Returns 401 if the user is not an admin.</p>
</dd>
</dl>
</div>
<div class="section" id="users">
<h3>Users<a class="headerlink" href="api.html#users" title="Permalink to this headline">¶</a></h3>
<p>Manage the user accounts of this MAAS.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/users/</span></code></dt>
<dd>List users.</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/users/</span></code> <code class="docutils literal"><span class="pre">op=whoami</span></code></dt>
<dd>Returns the currently logged in user.</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/users/</span></code></dt>
<dd><p class="first">Create a MAAS user account.</p>
<p>This is not safe: the password is sent in plaintext.  Avoid it for
production, unless you are confident that you can prevent eavesdroppers
from observing the request.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param username:</th><td class="field-body">Identifier-style username for the new user.</td>
</tr>
<tr class="field-even field"><th class="field-name">type username:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param email:</th><td class="field-body">Email address for the new user.</td>
</tr>
<tr class="field-even field"><th class="field-name">type email:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param password:</th><td class="field-body">Password for the new user.</td>
</tr>
<tr class="field-even field"><th class="field-name">type password:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param is_superuser:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Whether the new user is to be an administrator.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type is_superuser:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">bool (&#8216;0&#8217; for False, &#8216;1&#8217; for True)</td>
</tr>
</tbody>
</table>
<p class="last">Returns 400 if any mandatory parameters are missing.</p>
</dd>
</dl>
</div>
<div class="section" id="maas-version">
<h3>MAAS version<a class="headerlink" href="api.html#maas-version" title="Permalink to this headline">¶</a></h3>
<p>Information about this MAAS instance.</p>
<blockquote>
<div><p>This returns a JSON dictionary with information about this
MAAS instance:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
    <span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="s1">&#39;1.8.0&#39;</span><span class="p">,</span>
    <span class="s1">&#39;subversion&#39;</span><span class="p">:</span> <span class="s1">&#39;alpha10+bzr3750&#39;</span><span class="p">,</span>
    <span class="s1">&#39;capabilities&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;capability1&#39;</span><span class="p">,</span> <span class="s1">&#39;capability2&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/version/</span></code></dt>
<dd>Version and capabilities of this MAAS instance.</dd>
</dl>
</div>
<div class="section" id="vlan">
<h3>VLAN<a class="headerlink" href="api.html#vlan" title="Permalink to this headline">¶</a></h3>
<p>Manage VLAN on a fabric.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/fabrics/{fabric_id}/vlans/{vid}/</span></code></dt>
<dd><p class="first">Delete VLAN on fabric.</p>
<p class="last">Returns 404 if the fabric or VLAN is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/fabrics/{fabric_id}/vlans/{vid}/</span></code></dt>
<dd><p class="first">Read VLAN on fabric.</p>
<p class="last">Returns 404 if the fabric or VLAN is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/fabrics/{fabric_id}/vlans/{vid}/</span></code></dt>
<dd><p class="first">Update VLAN.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the VLAN.</td>
</tr>
<tr class="field-even field"><th class="field-name">type name:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param description:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Description of the VLAN.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type description:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name">param vid:</th><td class="field-body">VLAN ID of the VLAN.</td>
</tr>
<tr class="field-even field"><th class="field-name">type vid:</th><td class="field-body">integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">param mtu:</th><td class="field-body">The MTU to use on the VLAN.</td>
</tr>
<tr class="field-even field"><th class="field-name">type mtu:</th><td class="field-body">integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">Param dhcp_on:</th><td class="field-body">Whether or not DHCP should be managed on the VLAN.</td>
</tr>
<tr class="field-even field"><th class="field-name">type dhcp_on:</th><td class="field-body">boolean</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param primary_rack:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The primary rack controller managing the VLAN.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type primary_rack:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">system_id</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param secondary_rack:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The secondary rack controller manging the VLAN.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type secondary_rack:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">system_id</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the fabric or VLAN is not found.</p>
</dd>
</dl>
</div>
<div class="section" id="vlans">
<h3>VLANs<a class="headerlink" href="api.html#vlans" title="Permalink to this headline">¶</a></h3>
<p>Manage VLANs on a fabric.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/fabrics/{fabric_id}/vlans/</span></code></dt>
<dd><p class="first">List all VLANs belonging to fabric.</p>
<p class="last">Returns 404 if the fabric is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/fabrics/{fabric_id}/vlans/</span></code></dt>
<dd><p class="first">Create a VLAN.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the VLAN.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param description:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Description of the VLAN.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param vid:</th><td class="field-body">VLAN ID of the VLAN.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="volume-group">
<h3>Volume group<a class="headerlink" href="api.html#volume-group" title="Permalink to this headline">¶</a></h3>
<p>Manage volume group on a machine.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/nodes/{system_id}/volume-group/{volume_group_id}/</span></code></dt>
<dd><p class="first">Delete volume group on a machine.</p>
<p class="last">Returns 404 if the machine or volume group is not found.
Returns 409 if the machine is not Ready.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/nodes/{system_id}/volume-group/{volume_group_id}/</span></code></dt>
<dd><p class="first">Read volume group on a machine.</p>
<p class="last">Returns 404 if the machine or volume group is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/{system_id}/volume-group/{volume_group_id}/</span></code> <code class="docutils literal"><span class="pre">op=create_logical_volume</span></code></dt>
<dd><p class="first">Create a logical volume in the volume group.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the logical volume.</td>
</tr>
<tr class="field-even field"><th class="field-name">param uuid:</th><td class="field-body">(optional) UUID of the logical volume.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param size:</th><td class="field-body">Size of the logical volume.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the machine or volume group is not found.
Returns 409 if the machine is not Ready.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/{system_id}/volume-group/{volume_group_id}/</span></code> <code class="docutils literal"><span class="pre">op=delete_logical_volume</span></code></dt>
<dd><p class="first">Delete a logical volume in the volume group.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param id:</th><td class="field-body">ID of the logical volume.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 403 if no logical volume with id.
Returns 404 if the machine or volume group is not found.
Returns 409 if the machine is not Ready.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/nodes/{system_id}/volume-group/{volume_group_id}/</span></code></dt>
<dd><p class="first">Read volume group on a machine.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the volume group.</td>
</tr>
<tr class="field-even field"><th class="field-name">param uuid:</th><td class="field-body">UUID of the volume group.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param add_block_devices:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Block devices to add to the volume group.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param remove_block_devices:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Block devices to remove from the
volume group.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param add_partitions:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Partitions to add to the volume group.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param remove_partitions:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Partitions to remove from the volume group.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the machine or volume group is not found.
Returns 409 if the machine is not Ready.</p>
</dd>
</dl>
</div>
<div class="section" id="volume-groups">
<h3>Volume groups<a class="headerlink" href="api.html#volume-groups" title="Permalink to this headline">¶</a></h3>
<p>Manage volume groups on a machine.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/nodes/{system_id}/volume-groups/</span></code></dt>
<dd><p class="first">List all volume groups belonging to a machine.</p>
<p class="last">Returns 404 if the machine is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/nodes/{system_id}/volume-groups/</span></code></dt>
<dd><p class="first">Create a volume group belonging to machine.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Name of the volume group.</td>
</tr>
<tr class="field-even field"><th class="field-name">param uuid:</th><td class="field-body">(optional) UUID of the volume group.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param block_devices:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Block devices to add to the volume group.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param partitions:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Partitions to add to the volume group.</td>
</tr>
</tbody>
</table>
<p class="last">Returns 404 if the machine is not found.
Returns 409 if the machine is not Ready.</p>
</dd>
</dl>
</div>
<div class="section" id="zone">
<h3>Zone<a class="headerlink" href="api.html#zone" title="Permalink to this headline">¶</a></h3>
<p>Manage a physical zone.</p>
<blockquote>
<div><p>Any node is in a physical zone, or &#8220;zone&#8221; for short.  The meaning of a
physical zone is up to you: it could identify e.g. a server rack, a
network, or a data centre.  Users can then allocate nodes from specific
physical zones, to suit their redundancy or performance requirements.</p>
<p>This functionality is only available to administrators.  Other users can
view physical zones, but not modify them.</p>
</div></blockquote>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">/api/2.0/zones/{name}/</span></code></dt>
<dd><p class="first">DELETE request.  Delete zone.</p>
<p class="last">Returns 404 if the zone is not found.
Returns 204 if the zone is successfully deleted.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/zones/{name}/</span></code></dt>
<dd><p class="first">GET request.  Return zone.</p>
<p class="last">Returns 404 if the zone is not found.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/api/2.0/zones/{name}/</span></code></dt>
<dd><p class="first">PUT request.  Update zone.</p>
<p class="last">Returns 404 if the zone is not found.</p>
</dd>
</dl>
</div>
<div class="section" id="zones">
<h3>Zones<a class="headerlink" href="api.html#zones" title="Permalink to this headline">¶</a></h3>
<p>Manage physical zones.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/2.0/zones/</span></code></dt>
<dd><p class="first">List zones.</p>
<p class="last">Get a listing of all the physical zones.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/2.0/zones/</span></code></dt>
<dd><p class="first">Create a new physical zone.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body">Identifier-style name for the new zone.</td>
</tr>
<tr class="field-even field"><th class="field-name">type name:</th><td class="field-body">unicode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param description:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Free-form description of the new zone.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">type description:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
</div>
<div class="section" id="power-types">
<h2>Power types<a class="headerlink" href="api.html#power-types" title="Permalink to this headline">¶</a></h2>
<p>This is the list of the supported power types and their associated power parameters.  Note that the list of usable power types for a particular cluster might be a subset of this list if the cluster in question is from an older version of MAAS.</p>
<div class="section" id="manual-manual">
<h3>manual (Manual)<a class="headerlink" href="api.html#manual-manual" title="Permalink to this headline">¶</a></h3>
<p>Power parameters:</p>
</div>
<div class="section" id="virsh-virsh-virtual-systems">
<h3>virsh (Virsh (virtual systems))<a class="headerlink" href="api.html#virsh-virsh-virtual-systems" title="Permalink to this headline">¶</a></h3>
<p>Power parameters:</p>
<ul class="simple">
<li>power_address (Power address).</li>
<li>power_id (Power ID).</li>
<li>power_pass (Power password (optional)).</li>
</ul>
</div>
<div class="section" id="vmware-vmware">
<h3>vmware (VMWare)<a class="headerlink" href="api.html#vmware-vmware" title="Permalink to this headline">¶</a></h3>
<p>Power parameters:</p>
<ul class="simple">
<li>power_vm_name (VM Name (if UUID unknown)).</li>
<li>power_uuid (VM UUID (if known)).</li>
<li>power_address (VMware hostname).</li>
<li>power_user (VMware username).</li>
<li>power_pass (VMware password).</li>
<li>power_port (VMware API port (optional)).</li>
<li>power_protocol (VMware API protocol (optional)).</li>
</ul>
</div>
<div class="section" id="fence-cdu-sentry-switch-cdu">
<h3>fence_cdu (Sentry Switch CDU)<a class="headerlink" href="api.html#fence-cdu-sentry-switch-cdu" title="Permalink to this headline">¶</a></h3>
<p>Power parameters:</p>
<ul class="simple">
<li>power_address (Power address).</li>
<li>power_id (Power ID).</li>
<li>power_user (Power user).</li>
<li>power_pass (Power password).</li>
</ul>
</div>
<div class="section" id="ipmi-ipmi">
<h3>ipmi (IPMI)<a class="headerlink" href="api.html#ipmi-ipmi" title="Permalink to this headline">¶</a></h3>
<p>Power parameters:</p>
<ul class="simple">
<li>power_driver (Power driver). Choices: &#8216;LAN&#8217; (LAN [IPMI 1.5]), &#8216;LAN_2_0&#8217; (LAN_2_0 [IPMI 2.0])  Default: &#8216;LAN_2_0&#8217;.</li>
<li>power_address (IP address).</li>
<li>power_user (Power user).</li>
<li>power_pass (Power password).</li>
<li>mac_address (Power MAC).</li>
</ul>
</div>
<div class="section" id="moonshot-hp-moonshot-ilo4-ipmi">
<h3>moonshot (HP Moonshot - iLO4 (IPMI))<a class="headerlink" href="api.html#moonshot-hp-moonshot-ilo4-ipmi" title="Permalink to this headline">¶</a></h3>
<p>Power parameters:</p>
<ul class="simple">
<li>power_address (Power address).</li>
<li>power_user (Power user).</li>
<li>power_pass (Power password).</li>
<li>power_hwaddress (Power hardware address).</li>
</ul>
</div>
<div class="section" id="sm15k-seamicro-15000">
<h3>sm15k (SeaMicro 15000)<a class="headerlink" href="api.html#sm15k-seamicro-15000" title="Permalink to this headline">¶</a></h3>
<p>Power parameters:</p>
<ul class="simple">
<li>system_id (System ID).</li>
<li>power_address (Power address).</li>
<li>power_user (Power user).</li>
<li>power_pass (Power password).</li>
<li>power_control (Power control type). Choices: &#8216;ipmi&#8217; (IPMI), &#8216;restapi&#8217; (REST API v0.9), &#8216;restapi2&#8217; (REST API v2.0)  Default: &#8216;ipmi&#8217;.</li>
</ul>
</div>
<div class="section" id="amt-intel-amt">
<h3>amt (Intel AMT)<a class="headerlink" href="api.html#amt-intel-amt" title="Permalink to this headline">¶</a></h3>
<p>Power parameters:</p>
<ul class="simple">
<li>power_pass (Power password).</li>
<li>power_address (Power address).</li>
</ul>
</div>
<div class="section" id="dli-digital-loggers-inc-pdu">
<h3>dli (Digital Loggers, Inc. PDU)<a class="headerlink" href="api.html#dli-digital-loggers-inc-pdu" title="Permalink to this headline">¶</a></h3>
<p>Power parameters:</p>
<ul class="simple">
<li>outlet_id (Outlet ID).</li>
<li>power_address (Power address).</li>
<li>power_user (Power user).</li>
<li>power_pass (Power password).</li>
</ul>
</div>
<div class="section" id="wedge-facebook-s-wedge">
<h3>wedge (Facebook&#8217;s Wedge)<a class="headerlink" href="api.html#wedge-facebook-s-wedge" title="Permalink to this headline">¶</a></h3>
<p>Power parameters:</p>
<ul class="simple">
<li>power_address (IP address).</li>
<li>power_user (Power user).</li>
<li>power_pass (Power password).</li>
</ul>
</div>
<div class="section" id="ucsm-cisco-ucs-manager">
<h3>ucsm (Cisco UCS Manager)<a class="headerlink" href="api.html#ucsm-cisco-ucs-manager" title="Permalink to this headline">¶</a></h3>
<p>Power parameters:</p>
<ul class="simple">
<li>uuid (Server UUID).</li>
<li>power_address (URL for XML API).</li>
<li>power_user (API user).</li>
<li>power_pass (API password).</li>
</ul>
</div>
<div class="section" id="mscm-hp-moonshot-ilo-chassis-manager">
<h3>mscm (HP Moonshot - iLO Chassis Manager)<a class="headerlink" href="api.html#mscm-hp-moonshot-ilo-chassis-manager" title="Permalink to this headline">¶</a></h3>
<p>Power parameters:</p>
<ul class="simple">
<li>power_address (IP for MSCM CLI API).</li>
<li>power_user (MSCM CLI API user).</li>
<li>power_pass (MSCM CLI API password).</li>
<li>node_id (Node ID - Must adhere to cXnY format (X=cartridge number, Y=node number).).</li>
</ul>
</div>
<div class="section" id="msftocs-microsoft-ocs-chassis-manager">
<h3>msftocs (Microsoft OCS - Chassis Manager)<a class="headerlink" href="api.html#msftocs-microsoft-ocs-chassis-manager" title="Permalink to this headline">¶</a></h3>
<p>Power parameters:</p>
<ul class="simple">
<li>power_address (Power address).</li>
<li>power_port (Power port).</li>
<li>power_user (Power user).</li>
<li>power_pass (Power password).</li>
<li>blade_id (Blade ID (Typically 1-24)).</li>
</ul>
</div>
<div class="section" id="apc-american-power-conversion-apc-pdu">
<h3>apc (American Power Conversion (APC) PDU)<a class="headerlink" href="api.html#apc-american-power-conversion-apc-pdu" title="Permalink to this headline">¶</a></h3>
<p>Power parameters:</p>
<ul class="simple">
<li>power_address (IP for APC PDU).</li>
<li>node_outlet (APC PDU node outlet number (1-16)).</li>
<li>power_on_delay (Power ON outlet delay (seconds)).  Default: &#8216;5&#8217;.</li>
</ul>
</div>
<div class="section" id="hmc-ibm-hardware-management-console-hmc">
<h3>hmc (IBM Hardware Management Console (HMC))<a class="headerlink" href="api.html#hmc-ibm-hardware-management-console-hmc" title="Permalink to this headline">¶</a></h3>
<p>Power parameters:</p>
<ul class="simple">
<li>power_address (IP for HMC).</li>
<li>power_user (HMC username).</li>
<li>power_pass (HMC password).</li>
<li>server_name (HMC Managed System server name).</li>
<li>lpar (HMC logical partition).</li>
</ul>
</div>
<div class="section" id="nova-openstack-nova">
<h3>nova (OpenStack Nova)<a class="headerlink" href="api.html#nova-openstack-nova" title="Permalink to this headline">¶</a></h3>
<p>Power parameters:</p>
<ul class="simple">
<li>nova_id (Host UUID).</li>
<li>os_tenantname (Tenant name).</li>
<li>os_username (Username).</li>
<li>os_password (Password).</li>
<li>os_authurl (Auth URL).</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<a style="border:0" title="MAAS Documentation Homepage" href="index.html"><img src="/static/maas-1.9/maas-logo-200.png" alt="MAAS logo"/></a>
<h2 style="text-align:center;">MAAS</h2>
<p style="font-style:italic;font-size:0.9em; text-align:center; margin-bottom:1.5em">Metal As A Service.</p>
<span id="version_switcher"></span>
<br/>
<br/>

  <ul>
<li><a class="reference internal" href="api.html#">MAAS API</a><ul>
<li><a class="reference internal" href="api.html#api-versions">API versions</a></li>
<li><a class="reference internal" href="api.html#http-methods-and-parameter-passing">HTTP methods and parameter-passing</a></li>
<li><a class="reference internal" href="api.html#operations">Operations</a><ul>
<li><a class="reference internal" href="api.html#logged-in-user">Logged-in user</a></li>
<li><a class="reference internal" href="api.html#bcache-cache-set">Bcache Cache Set</a></li>
<li><a class="reference internal" href="api.html#bcache-cache-sets">Bcache Cache Sets</a></li>
<li><a class="reference internal" href="api.html#bcache-device">Bcache Device</a></li>
<li><a class="reference internal" href="api.html#bcache-devices">Bcache Devices</a></li>
<li><a class="reference internal" href="api.html#block-device">Block device</a></li>
<li><a class="reference internal" href="api.html#block-devices">Block devices</a></li>
<li><a class="reference internal" href="api.html#boot-resource">Boot resource</a></li>
<li><a class="reference internal" href="api.html#boot-resources">Boot resources</a></li>
<li><a class="reference internal" href="api.html#boot-source">Boot source</a></li>
<li><a class="reference internal" href="api.html#boot-source-selection">Boot source selection</a></li>
<li><a class="reference internal" href="api.html#boot-source-selections">Boot source selections</a></li>
<li><a class="reference internal" href="api.html#boot-sources">Boot sources</a></li>
<li><a class="reference internal" href="api.html#commissioning-script">Commissioning script</a></li>
<li><a class="reference internal" href="api.html#commissioning-scripts">Commissioning scripts</a></li>
<li><a class="reference internal" href="api.html#dhcp-snippet">DHCP Snippet</a></li>
<li><a class="reference internal" href="api.html#dhcp-snippets">DHCP Snippets</a></li>
<li><a class="reference internal" href="api.html#dnsresource">DNSResource</a></li>
<li><a class="reference internal" href="api.html#dnsresourcerecord">DNSResourceRecord</a></li>
<li><a class="reference internal" href="api.html#dnsresourcerecords">DNSResourceRecords</a></li>
<li><a class="reference internal" href="api.html#dnsresources">DNSResources</a></li>
<li><a class="reference internal" href="api.html#device">Device</a></li>
<li><a class="reference internal" href="api.html#devices">Devices</a></li>
<li><a class="reference internal" href="api.html#discoveries">Discoveries</a></li>
<li><a class="reference internal" href="api.html#discovery">Discovery</a></li>
<li><a class="reference internal" href="api.html#domains">Domains</a></li>
<li><a class="reference internal" href="api.html#events">Events</a></li>
<li><a class="reference internal" href="api.html#fabric">Fabric</a></li>
<li><a class="reference internal" href="api.html#fabrics">Fabrics</a></li>
<li><a class="reference internal" href="api.html#fan-network">Fan Network</a></li>
<li><a class="reference internal" href="api.html#fan-networks">Fan Networks</a></li>
<li><a class="reference internal" href="api.html#file">File</a></li>
<li><a class="reference internal" href="api.html#files">Files</a></li>
<li><a class="reference internal" href="api.html#ip-addresses">IP Addresses</a></li>
<li><a class="reference internal" href="api.html#ip-range">IP Range</a></li>
<li><a class="reference internal" href="api.html#ip-ranges">IP Ranges</a></li>
<li><a class="reference internal" href="api.html#interface">Interface</a></li>
<li><a class="reference internal" href="api.html#interfaces">Interfaces</a></li>
<li><a class="reference internal" href="api.html#license-key">License Key</a></li>
<li><a class="reference internal" href="api.html#license-keys">License Keys</a></li>
<li><a class="reference internal" href="api.html#maas-server">MAAS server</a></li>
<li><a class="reference internal" href="api.html#machine">Machine</a></li>
<li><a class="reference internal" href="api.html#machines">Machines</a></li>
<li><a class="reference internal" href="api.html#network">Network</a></li>
<li><a class="reference internal" href="api.html#networks">Networks</a></li>
<li><a class="reference internal" href="api.html#node">Node</a></li>
<li><a class="reference internal" href="api.html#commissioning-results">Commissioning results</a></li>
<li><a class="reference internal" href="api.html#nodes">Nodes</a></li>
<li><a class="reference internal" href="api.html#package-repositories">Package Repositories</a></li>
<li><a class="reference internal" href="api.html#package-repository">Package Repository</a></li>
<li><a class="reference internal" href="api.html#partitions">Partitions</a></li>
<li><a class="reference internal" href="api.html#id1">Partitions</a></li>
<li><a class="reference internal" href="api.html#rackcontroller">RackController</a></li>
<li><a class="reference internal" href="api.html#rackcontrollers">RackControllers</a></li>
<li><a class="reference internal" href="api.html#raid-device">RAID Device</a></li>
<li><a class="reference internal" href="api.html#raid-devices">RAID Devices</a></li>
<li><a class="reference internal" href="api.html#regioncontroller">RegionController</a></li>
<li><a class="reference internal" href="api.html#regioncontrollers">RegionControllers</a></li>
<li><a class="reference internal" href="api.html#ssh-key">SSH Key</a></li>
<li><a class="reference internal" href="api.html#ssh-keys">SSH Keys</a></li>
<li><a class="reference internal" href="api.html#ssl-key">SSL Key</a></li>
<li><a class="reference internal" href="api.html#ssl-keys">SSL Keys</a></li>
<li><a class="reference internal" href="api.html#space">Space</a></li>
<li><a class="reference internal" href="api.html#spaces">Spaces</a></li>
<li><a class="reference internal" href="api.html#static-route">Static route</a></li>
<li><a class="reference internal" href="api.html#static-routes">Static routes</a></li>
<li><a class="reference internal" href="api.html#subnet">Subnet</a></li>
<li><a class="reference internal" href="api.html#subnets">Subnets</a></li>
<li><a class="reference internal" href="api.html#tag">Tag</a></li>
<li><a class="reference internal" href="api.html#tags">Tags</a></li>
<li><a class="reference internal" href="api.html#users">Users</a></li>
<li><a class="reference internal" href="api.html#maas-version">MAAS version</a></li>
<li><a class="reference internal" href="api.html#vlan">VLAN</a></li>
<li><a class="reference internal" href="api.html#vlans">VLANs</a></li>
<li><a class="reference internal" href="api.html#volume-group">Volume group</a></li>
<li><a class="reference internal" href="api.html#volume-groups">Volume groups</a></li>
<li><a class="reference internal" href="api.html#zone">Zone</a></li>
<li><a class="reference internal" href="api.html#zones">Zones</a></li>
</ul>
</li>
<li><a class="reference internal" href="api.html#power-types">Power types</a><ul>
<li><a class="reference internal" href="api.html#manual-manual">manual (Manual)</a></li>
<li><a class="reference internal" href="api.html#virsh-virsh-virtual-systems">virsh (Virsh (virtual systems))</a></li>
<li><a class="reference internal" href="api.html#vmware-vmware">vmware (VMWare)</a></li>
<li><a class="reference internal" href="api.html#fence-cdu-sentry-switch-cdu">fence_cdu (Sentry Switch CDU)</a></li>
<li><a class="reference internal" href="api.html#ipmi-ipmi">ipmi (IPMI)</a></li>
<li><a class="reference internal" href="api.html#moonshot-hp-moonshot-ilo4-ipmi">moonshot (HP Moonshot - iLO4 (IPMI))</a></li>
<li><a class="reference internal" href="api.html#sm15k-seamicro-15000">sm15k (SeaMicro 15000)</a></li>
<li><a class="reference internal" href="api.html#amt-intel-amt">amt (Intel AMT)</a></li>
<li><a class="reference internal" href="api.html#dli-digital-loggers-inc-pdu">dli (Digital Loggers, Inc. PDU)</a></li>
<li><a class="reference internal" href="api.html#wedge-facebook-s-wedge">wedge (Facebook&#8217;s Wedge)</a></li>
<li><a class="reference internal" href="api.html#ucsm-cisco-ucs-manager">ucsm (Cisco UCS Manager)</a></li>
<li><a class="reference internal" href="api.html#mscm-hp-moonshot-ilo-chassis-manager">mscm (HP Moonshot - iLO Chassis Manager)</a></li>
<li><a class="reference internal" href="api.html#msftocs-microsoft-ocs-chassis-manager">msftocs (Microsoft OCS - Chassis Manager)</a></li>
<li><a class="reference internal" href="api.html#apc-american-power-conversion-apc-pdu">apc (American Power Conversion (APC) PDU)</a></li>
<li><a class="reference internal" href="api.html#hmc-ibm-hardware-management-console-hmc">hmc (IBM Hardware Management Console (HMC))</a></li>
<li><a class="reference internal" href="api.html#nova-openstack-nova">nova (OpenStack Nova)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<script type="text/javascript">
$(document).ready(function () {
  if (true) {
    $.ajaxSetup({cache: true});
    $.getScript('/static/maas-1.9/versions.js', function() {
      console.log( "Versions script loaded." );
      set_up_version_switcher('#version_switcher', 'docs');
    });
}
});
</script>

<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
  <li class="nav-item nav-item-0">
    <a href="index.html">MAAS 2.1 documentation index</a>
  </li>
 
      </ul>
    </div>
<footer class="global clearfix">
  <div class="legal clearfix">
    <p>&copy; Copyright 2012-2015, MAAS Developers. Ubuntu and Canonical are registered trademarks of
      <a href="http://canonical.com">Canonical Ltd</a>.
    </p>
    <p>
      Revision 5482
 (2016-10-14 11:45:28 -0400).
      Documentation generation date: 2016-11-04 12:15:03 +0200.
    </p>
  </div>
</footer>
  </body>
</html>
